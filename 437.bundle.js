/*! For license information please see 437.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkcollaborative_note_taking_app=self.webpackChunkcollaborative_note_taking_app||[]).push([[437],{9998:(t,e,n)=>{n.d(e,{A:()=>E});var r,i,o=n(1635),a=n(1625),s=n(1134),u=n(2477),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.FA("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Vy("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.A4)(t),this.container=new s.h1(e.name),this._addComponent(new s.uA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.gR)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.uA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.He,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Ey)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.gR)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.zw)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.Cl)((0,o.Cl)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.zw)(e,t)},createSubscribe:a.tD,ErrorFactory:a.FA,deepExtend:a.zw}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.Bd)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.Ll)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new s.uA("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(h,"0.6.30",void 0),t.registerVersion("fire-js","")}(w);const E=w},1134:(t,e,n)=>{n.d(e,{h1:()=>u,uA:()=>o});var r=n(1635),i=n(1625),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.cY;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(t){}try{for(var i=(0,r.Ju)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.zs)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.sH)(this,void 0,void 0,(function(){var t;return(0,r.YH)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fX)((0,r.fX)([],(0,r.zs)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.zs)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=a),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.Ju)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.zs)(c.value,2),h=l[0],f=l[1];a===this.normalizeInstanceIdentifier(h)&&f.resolve(s)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=(0,r.Ju)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},2477:(t,e,n)=>{function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{$b:()=>o,Ey:()=>d,He:()=>f,Vy:()=>h});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},1625:(t,e,n)=>{n.d(e,{A4:()=>s,Bd:()=>p,FA:()=>I,Fy:()=>l,Ku:()=>C,Ll:()=>d,ZQ:()=>h,b8:()=>g,cY:()=>c,gR:()=>S,jZ:()=>f,lT:()=>y,lV:()=>m,n4:()=>b,nr:()=>w,sr:()=>v,tD:()=>A,zw:()=>u});var r=n(1635),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){return function(t){var e=i(t);return o.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function s(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=u(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function l(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.Cl)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function d(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function p(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return h().indexOf("Electron/")>=0}function y(){var t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b(){return h().indexOf("MSAppHost/")>=0}function w(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return(0,r.C6)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").";return new E(i,s,r)},t}(),T=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A(t,e){var n=new _(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var _=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function x(){}function C(t){return t&&t._delegate?t._delegate:t}},6746:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(45),i=n(8168),o=n(6540),a=n(53),s=n(5192),u=n(9773),c=n(4657),l=n(7515),h=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,h=t.color,f=void 0===h?"default":h,d=t.component,p=void 0===d?"button":d,v=t.disabled,m=void 0!==v&&v,g=t.disableElevation,y=void 0!==g&&g,b=t.disableFocusRipple,w=void 0!==b&&b,E=t.endIcon,I=t.focusVisibleClassName,T=t.fullWidth,S=void 0!==T&&T,A=t.size,_=void 0===A?"medium":A,x=t.startIcon,C=t.type,N=void 0===C?"button":C,D=t.variant,k=void 0===D?"text":D,R=(0,r.A)(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),O=x&&o.createElement("span",{className:(0,a.A)(s.startIcon,s["iconSize".concat((0,l.A)(_))])},x),L=E&&o.createElement("span",{className:(0,a.A)(s.endIcon,s["iconSize".concat((0,l.A)(_))])},E);return o.createElement(c.A,(0,i.A)({className:(0,a.A)(s.root,s[k],u,"inherit"===f?s.colorInherit:"default"!==f&&s["".concat(k).concat((0,l.A)(f))],"medium"!==_&&[s["".concat(k,"Size").concat((0,l.A)(_))],s["size".concat((0,l.A)(_))]],y&&s.disableElevation,m&&s.disabled,S&&s.fullWidth),component:p,disabled:m,focusRipple:!w,focusVisibleClassName:(0,a.A)(s.focusVisible,I),ref:e,type:N},R),o.createElement("span",{className:s.label},O,n,L))}));const f=(0,s.A)((function(t){return{root:(0,i.A)({},t.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:t.shape.borderRadius,color:t.palette.text.primary,transition:t.transitions.create(["background-color","box-shadow","border"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,u.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:t.palette.primary.main,"&:hover":{backgroundColor:(0,u.X4)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:t.palette.secondary.main,"&:hover":{backgroundColor:(0,u.X4)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===t.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}},outlinedPrimary:{color:t.palette.primary.main,border:"1px solid ".concat((0,u.X4)(t.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(t.palette.primary.main),backgroundColor:(0,u.X4)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:t.palette.secondary.main,border:"1px solid ".concat((0,u.X4)(t.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(t.palette.secondary.main),backgroundColor:(0,u.X4)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(t.palette.action.disabled)}},contained:{color:t.palette.getContrastText(t.palette.grey[300]),backgroundColor:t.palette.grey[300],boxShadow:t.shadows[2],"&:hover":{backgroundColor:t.palette.grey.A100,boxShadow:t.shadows[4],"@media (hover: none)":{boxShadow:t.shadows[2],backgroundColor:t.palette.grey[300]},"&$disabled":{backgroundColor:t.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:t.shadows[6]},"&:active":{boxShadow:t.shadows[8]},"&$disabled":{color:t.palette.action.disabled,boxShadow:t.shadows[0],backgroundColor:t.palette.action.disabledBackground}},containedPrimary:{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}}},containedSecondary:{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(h)},4657:(t,e,n)=>{n.d(e,{A:()=>F});var r=n(8168),i=n(45),o=n(6540),a=n(961),s=n(53),u=n(4801),c=n(2319),l=n(5192),h=!0,f=!1,d=null,p={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function v(t){t.metaKey||t.altKey||t.ctrlKey||(h=!0)}function m(){h=!1}function g(){"hidden"===this.visibilityState&&f&&(h=!0)}function y(t){var e,n,r,i=t.target;try{return i.matches(":focus-visible")}catch(t){}return h||(n=(e=i).type,!("INPUT"!==(r=e.tagName)||!p[n]||e.readOnly)||"TEXTAREA"===r&&!e.readOnly||!!e.isContentEditable)}function b(){f=!0,window.clearTimeout(d),d=window.setTimeout((function(){f=!1}),100)}function w(){return{isFocusVisible:y,onBlurVisible:b,ref:o.useCallback((function(t){var e,n=a.findDOMNode(t);null!=n&&((e=n.ownerDocument).addEventListener("keydown",v,!0),e.addEventListener("mousedown",m,!0),e.addEventListener("pointerdown",m,!0),e.addEventListener("touchstart",m,!0),e.addEventListener("visibilitychange",g,!0))}),[])}}var E=n(5458),I=n(8587),T=n(9417),S=n(5540),A=n(7241);function _(t,e){var n=Object.create(null);return t&&o.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,o.isValidElement)(t)?e(t):t}(t)})),n}function x(t,e,n){return null!=n[e]?n[e]:t.props[e]}function C(t,e,n){var r=_(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in e){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(e,r);return Object.keys(i).forEach((function(a){var s=i[a];if((0,o.isValidElement)(s)){var u=a in e,c=a in r,l=e[a],h=(0,o.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,o.isValidElement)(l)&&(i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:x(s,"exit",t),enter:x(s,"enter",t)})):i[a]=(0,o.cloneElement)(s,{in:!1}):i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:x(s,"exit",t),enter:x(s,"enter",t)})}})),i}var N=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},D=function(t){function e(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind((0,T.A)(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,S.A)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,a=e.handleExited;return{children:e.firstRender?(n=t,r=a,_(n.children,(function(t){return(0,o.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:x(t,"appear",n),enter:x(t,"enter",n),exit:x(t,"exit",n)})}))):C(t,i,a),firstRender:!1}},n.handleExited=function(t,e){var n=_(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,r.A)({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,r=(0,I.A)(t,["component","childFactory"]),i=this.state.contextValue,a=N(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===e?o.createElement(A.A.Provider,{value:i},a):o.createElement(A.A.Provider,{value:i},o.createElement(e,r,a))},e}(o.Component);D.propTypes={},D.defaultProps={component:"div",childFactory:function(t){return t}};const k=D;var R="undefined"==typeof window?o.useEffect:o.useLayoutEffect;const O=function(t){var e=t.classes,n=t.pulsate,r=void 0!==n&&n,i=t.rippleX,a=t.rippleY,u=t.rippleSize,l=t.in,h=t.onExited,f=void 0===h?function(){}:h,d=t.timeout,p=o.useState(!1),v=p[0],m=p[1],g=(0,s.A)(e.ripple,e.rippleVisible,r&&e.ripplePulsate),y={width:u,height:u,top:-u/2+a,left:-u/2+i},b=(0,s.A)(e.child,v&&e.childLeaving,r&&e.childPulsate),w=(0,c.A)(f);return R((function(){if(!l){m(!0);var t=setTimeout(w,d);return function(){clearTimeout(t)}}}),[w,l,d]),o.createElement("span",{className:g,style:y},o.createElement("span",{className:b}))};var L=o.forwardRef((function(t,e){var n=t.center,a=void 0!==n&&n,u=t.classes,c=t.className,l=(0,i.A)(t,["center","classes","className"]),h=o.useState([]),f=h[0],d=h[1],p=o.useRef(0),v=o.useRef(null);o.useEffect((function(){v.current&&(v.current(),v.current=null)}),[f]);var m=o.useRef(!1),g=o.useRef(null),y=o.useRef(null),b=o.useRef(null);o.useEffect((function(){return function(){clearTimeout(g.current)}}),[]);var w=o.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,a=t.cb;d((function(t){return[].concat((0,E.A)(t),[o.createElement(O,{key:p.current,classes:u,timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i})])})),p.current+=1,v.current=a}),[u]),I=o.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,o=e.center,s=void 0===o?a||e.pulsate:o,u=e.fakeElement,c=void 0!==u&&u;if("mousedown"===t.type&&m.current)m.current=!1;else{"touchstart"===t.type&&(m.current=!0);var l,h,f,d=c?null:b.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)l=Math.round(p.width/2),h=Math.round(p.height/2);else{var v=t.touches?t.touches[0]:t,E=v.clientX,I=v.clientY;l=Math.round(E-p.left),h=Math.round(I-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2==0&&(f+=1);else{var T=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,S=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(T,2)+Math.pow(S,2))}t.touches?null===y.current&&(y.current=function(){w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})},g.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:h,rippleSize:f,cb:n})}}),[a,w]),T=o.useCallback((function(){I({},{pulsate:!0})}),[I]),S=o.useCallback((function(t,e){if(clearTimeout(g.current),"touchend"===t.type&&y.current)return t.persist(),y.current(),y.current=null,void(g.current=setTimeout((function(){S(t,e)})));y.current=null,d((function(t){return t.length>0?t.slice(1):t})),v.current=e}),[]);return o.useImperativeHandle(e,(function(){return{pulsate:T,start:I,stop:S}}),[T,I,S]),o.createElement("span",(0,r.A)({className:(0,s.A)(u.root,c),ref:b},l),o.createElement(k,{component:null,exit:!0},f))}));const P=(0,l.A)((function(t){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(t.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(t.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(t.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(t.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(o.memo(L));var M=o.forwardRef((function(t,e){var n=t.action,l=t.buttonRef,h=t.centerRipple,f=void 0!==h&&h,d=t.children,p=t.classes,v=t.className,m=t.component,g=void 0===m?"button":m,y=t.disabled,b=void 0!==y&&y,E=t.disableRipple,I=void 0!==E&&E,T=t.disableTouchRipple,S=void 0!==T&&T,A=t.focusRipple,_=void 0!==A&&A,x=t.focusVisibleClassName,C=t.onBlur,N=t.onClick,D=t.onFocus,k=t.onFocusVisible,R=t.onKeyDown,O=t.onKeyUp,L=t.onMouseDown,M=t.onMouseLeave,F=t.onMouseUp,V=t.onTouchEnd,H=t.onTouchMove,U=t.onTouchStart,q=t.onDragLeave,B=t.tabIndex,j=void 0===B?0:B,z=t.TouchRippleProps,K=t.type,W=void 0===K?"button":K,Y=(0,i.A)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),G=o.useRef(null),Q=o.useRef(null),$=o.useState(!1),X=$[0],J=$[1];b&&X&&J(!1);var Z=w(),tt=Z.isFocusVisible,et=Z.onBlurVisible,nt=Z.ref;function rt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;return(0,c.A)((function(r){return e&&e(r),!n&&Q.current&&Q.current[t](r),!0}))}o.useImperativeHandle(n,(function(){return{focusVisible:function(){J(!0),G.current.focus()}}}),[]),o.useEffect((function(){X&&_&&!I&&Q.current.pulsate()}),[I,_,X]);var it=rt("start",L),ot=rt("stop",q),at=rt("stop",F),st=rt("stop",(function(t){X&&t.preventDefault(),M&&M(t)})),ut=rt("start",U),ct=rt("stop",V),lt=rt("stop",H),ht=rt("stop",(function(t){X&&(et(t),J(!1)),C&&C(t)}),!1),ft=(0,c.A)((function(t){G.current||(G.current=t.currentTarget),tt(t)&&(J(!0),k&&k(t)),D&&D(t)})),dt=function(){var t=a.findDOMNode(G.current);return g&&"button"!==g&&!("A"===t.tagName&&t.href)},pt=o.useRef(!1),vt=(0,c.A)((function(t){_&&!pt.current&&X&&Q.current&&" "===t.key&&(pt.current=!0,t.persist(),Q.current.stop(t,(function(){Q.current.start(t)}))),t.target===t.currentTarget&&dt()&&" "===t.key&&t.preventDefault(),R&&R(t),t.target===t.currentTarget&&dt()&&"Enter"===t.key&&!b&&(t.preventDefault(),N&&N(t))})),mt=(0,c.A)((function(t){_&&" "===t.key&&Q.current&&X&&!t.defaultPrevented&&(pt.current=!1,t.persist(),Q.current.stop(t,(function(){Q.current.pulsate(t)}))),O&&O(t),N&&t.target===t.currentTarget&&dt()&&" "===t.key&&!t.defaultPrevented&&N(t)})),gt=g;"button"===gt&&Y.href&&(gt="a");var yt={};"button"===gt?(yt.type=W,yt.disabled=b):("a"===gt&&Y.href||(yt.role="button"),yt["aria-disabled"]=b);var bt=(0,u.A)(l,e),wt=(0,u.A)(nt,G),Et=(0,u.A)(bt,wt),It=o.useState(!1),Tt=It[0],St=It[1];o.useEffect((function(){St(!0)}),[]);var At=Tt&&!I&&!b;return o.createElement(gt,(0,r.A)({className:(0,s.A)(p.root,v,X&&[p.focusVisible,x],b&&p.disabled),onBlur:ht,onClick:N,onFocus:ft,onKeyDown:vt,onKeyUp:mt,onMouseDown:it,onMouseLeave:st,onMouseUp:at,onDragLeave:ot,onTouchEnd:ct,onTouchMove:lt,onTouchStart:ut,ref:Et,tabIndex:b?-1:j},yt,Y),d,At?o.createElement(P,(0,r.A)({ref:Q,center:f},z)):null)}));const F=(0,l.A)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(M)},5834:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(8168),i=n(296),o=n(45),a=n(6540),s=n(7353),u=n(3870),c=n(6232),l=n(3173),h=n(4801),f={entering:{opacity:1},entered:{opacity:1}},d={enter:u.p0.enteringScreen,exit:u.p0.leavingScreen};const p=a.forwardRef((function(t,e){var n=t.children,u=t.disableStrictModeCompat,p=void 0!==u&&u,v=t.in,m=t.onEnter,g=t.onEntered,y=t.onEntering,b=t.onExit,w=t.onExited,E=t.onExiting,I=t.style,T=t.TransitionComponent,S=void 0===T?s.Ay:T,A=t.timeout,_=void 0===A?d:A,x=(0,o.A)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),C=(0,c.A)(),N=C.unstable_strictMode&&!p,D=a.useRef(null),k=(0,h.A)(n.ref,e),R=(0,h.A)(N?D:void 0,k),O=function(t){return function(e,n){if(t){var r=N?[D.current,e]:[e,n],o=(0,i.A)(r,2),a=o[0],s=o[1];void 0===s?t(a):t(a,s)}}},L=O(y),P=O((function(t,e){(0,l.q)(t);var n=(0,l.c)({style:I,timeout:_},{mode:"enter"});t.style.webkitTransition=C.transitions.create("opacity",n),t.style.transition=C.transitions.create("opacity",n),m&&m(t,e)})),M=O(g),F=O(E),V=O((function(t){var e=(0,l.c)({style:I,timeout:_},{mode:"exit"});t.style.webkitTransition=C.transitions.create("opacity",e),t.style.transition=C.transitions.create("opacity",e),b&&b(t)})),H=O(w);return a.createElement(S,(0,r.A)({appear:!0,in:v,nodeRef:N?D:void 0,onEnter:P,onEntered:M,onEntering:L,onExit:V,onExited:H,onExiting:F,timeout:_},x),(function(t,e){return a.cloneElement(n,(0,r.A)({style:(0,r.A)({opacity:0,visibility:"exited"!==t||v?void 0:"hidden"},f[t],I,n.props.style),ref:R},e))}))}))},7606:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(45),i=n(8168),o=n(6540),a=n(53),s=n(5192),u=[0,1,2,3,4,5,6,7,8,9,10],c=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(t);return"".concat(n/e).concat(String(t).replace(String(n),"")||"px")}var h=o.forwardRef((function(t,e){var n=t.alignContent,s=void 0===n?"stretch":n,u=t.alignItems,c=void 0===u?"stretch":u,l=t.classes,h=t.className,f=t.component,d=void 0===f?"div":f,p=t.container,v=void 0!==p&&p,m=t.direction,g=void 0===m?"row":m,y=t.item,b=void 0!==y&&y,w=t.justify,E=t.justifyContent,I=void 0===E?"flex-start":E,T=t.lg,S=void 0!==T&&T,A=t.md,_=void 0!==A&&A,x=t.sm,C=void 0!==x&&x,N=t.spacing,D=void 0===N?0:N,k=t.wrap,R=void 0===k?"wrap":k,O=t.xl,L=void 0!==O&&O,P=t.xs,M=void 0!==P&&P,F=t.zeroMinWidth,V=void 0!==F&&F,H=(0,r.A)(t,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),U=(0,a.A)(l.root,h,v&&[l.container,0!==D&&l["spacing-xs-".concat(String(D))]],b&&l.item,V&&l.zeroMinWidth,"row"!==g&&l["direction-xs-".concat(String(g))],"wrap"!==R&&l["wrap-xs-".concat(String(R))],"stretch"!==c&&l["align-items-xs-".concat(String(c))],"stretch"!==s&&l["align-content-xs-".concat(String(s))],"flex-start"!==(w||I)&&l["justify-content-xs-".concat(String(w||I))],!1!==M&&l["grid-xs-".concat(String(M))],!1!==C&&l["grid-sm-".concat(String(C))],!1!==_&&l["grid-md-".concat(String(_))],!1!==S&&l["grid-lg-".concat(String(S))],!1!==L&&l["grid-xl-".concat(String(L))]);return o.createElement(d,(0,i.A)({className:U,ref:e},H))}));const f=(0,s.A)((function(t){return(0,i.A)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(t,e){var n={};return u.forEach((function(e){var r=t.spacing(e);0!==r&&(n["spacing-".concat("xs","-").concat(e)]={margin:"-".concat(l(r,2)),width:"calc(100% + ".concat(l(r),")"),"& > $item":{padding:l(r,2)}})})),n}(t),t.breakpoints.keys.reduce((function(e,n){return function(t,e,n){var r={};c.forEach((function(t){var e="grid-".concat(n,"-").concat(t);if(!0!==t)if("auto"!==t){var i="".concat(Math.round(t/12*1e8)/1e6,"%");r[e]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[e]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[e]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,i.A)(t,r):t[e.breakpoints.up(n)]=r}(e,t,n),e}),{}))}),{name:"MuiGrid"})(h)},2460:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(8168),i=n(45),o=n(6540),a=n(53),s=n(5192),u=n(9773),c=n(4657),l=n(7515),h=o.forwardRef((function(t,e){var n=t.edge,s=void 0!==n&&n,u=t.children,h=t.classes,f=t.className,d=t.color,p=void 0===d?"default":d,v=t.disabled,m=void 0!==v&&v,g=t.disableFocusRipple,y=void 0!==g&&g,b=t.size,w=void 0===b?"medium":b,E=(0,i.A)(t,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return o.createElement(c.A,(0,r.A)({className:(0,a.A)(h.root,f,"default"!==p&&h["color".concat((0,l.A)(p))],m&&h.disabled,"small"===w&&h["size".concat((0,l.A)(w))],{start:h.edgeStart,end:h.edgeEnd}[s]),centerRipple:!0,focusRipple:!y,disabled:m,ref:e},E),o.createElement("span",{className:h.label},u))}));const f=(0,s.A)((function(t){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,u.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:t.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:t.palette.primary.main,"&:hover":{backgroundColor:(0,u.X4)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:t.palette.secondary.main,"&:hover":{backgroundColor:(0,u.X4)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:t.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(h)},8419:(t,e,n)=>{n.d(e,{A:()=>ie});var r=n(8168),i=n(45),o=n(6540),a=n(53),s=n(7860);function u(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&void 0===e[n]&&(t[n]=r[n]),t}),{})}var c=o.createContext();const l=c;var h=n(5192),f=n(7515),d=n(4801);function p(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this;clearTimeout(e),e=setTimeout((function(){t.apply(a,i)}),n)}return r.clear=function(){clearTimeout(e)},r}function v(t,e){return parseInt(t[e],10)||0}var m="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,g={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const y=o.forwardRef((function(t,e){var n=t.onChange,a=t.rows,s=t.rowsMax,u=t.rowsMin,c=t.maxRows,l=t.minRows,h=void 0===l?1:l,f=t.style,y=t.value,b=(0,i.A)(t,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),w=c||s,E=a||u||h,I=o.useRef(null!=y).current,T=o.useRef(null),S=(0,d.A)(e,T),A=o.useRef(null),_=o.useRef(0),x=o.useState({}),C=x[0],N=x[1],D=o.useCallback((function(){var e=T.current,n=window.getComputedStyle(e),r=A.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=v(n,"padding-bottom")+v(n,"padding-top"),a=v(n,"border-bottom-width")+v(n,"border-top-width"),s=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,c=s;E&&(c=Math.max(Number(E)*u,c)),w&&(c=Math.min(Number(w)*u,c));var l=(c=Math.max(c,u))+("border-box"===i?o+a:0),h=Math.abs(c-s)<=1;N((function(t){return _.current<20&&(l>0&&Math.abs((t.outerHeightStyle||0)-l)>1||t.overflow!==h)?(_.current+=1,{overflow:h,outerHeightStyle:l}):t}))}),[w,E,t.placeholder]);return o.useEffect((function(){var t=p((function(){_.current=0,D()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}),[D]),m((function(){D()})),o.useEffect((function(){_.current=0}),[y]),o.createElement(o.Fragment,null,o.createElement("textarea",(0,r.A)({value:y,onChange:function(t){_.current=0,I||D(),n&&n(t)},ref:S,rows:E,style:(0,r.A)({height:C.outerHeightStyle,overflow:C.overflow?"hidden":null},f)},b)),o.createElement("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:A,tabIndex:-1,style:(0,r.A)({},g,f)}))}));function b(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(b(t.value)&&""!==t.value||e&&b(t.defaultValue)&&""!==t.defaultValue)}var E="undefined"==typeof window?o.useEffect:o.useLayoutEffect,I=o.forwardRef((function(t,e){var n=t["aria-describedby"],h=t.autoComplete,p=t.autoFocus,v=t.classes,m=t.className,g=(t.color,t.defaultValue),b=t.disabled,I=t.endAdornment,T=(t.error,t.fullWidth),S=void 0!==T&&T,A=t.id,_=t.inputComponent,x=void 0===_?"input":_,C=t.inputProps,N=void 0===C?{}:C,D=t.inputRef,k=(t.margin,t.multiline),R=void 0!==k&&k,O=t.name,L=t.onBlur,P=t.onChange,M=t.onClick,F=t.onFocus,V=t.onKeyDown,H=t.onKeyUp,U=t.placeholder,q=t.readOnly,B=t.renderSuffix,j=t.rows,z=t.rowsMax,K=t.rowsMin,W=t.maxRows,Y=t.minRows,G=t.startAdornment,Q=t.type,$=void 0===Q?"text":Q,X=t.value,J=(0,i.A)(t,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),Z=null!=N.value?N.value:X,tt=o.useRef(null!=Z).current,et=o.useRef(),nt=o.useCallback((function(t){}),[]),rt=(0,d.A)(N.ref,nt),it=(0,d.A)(D,rt),ot=(0,d.A)(et,it),at=o.useState(!1),st=at[0],ut=at[1],ct=o.useContext(c),lt=u({props:t,muiFormControl:ct,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});lt.focused=ct?ct.focused:st,o.useEffect((function(){!ct&&b&&st&&(ut(!1),L&&L())}),[ct,b,st,L]);var ht=ct&&ct.onFilled,ft=ct&&ct.onEmpty,dt=o.useCallback((function(t){w(t)?ht&&ht():ft&&ft()}),[ht,ft]);E((function(){tt&&dt({value:Z})}),[Z,dt,tt]),o.useEffect((function(){dt(et.current)}),[]);var pt=x,vt=(0,r.A)({},N,{ref:ot});return"string"!=typeof pt?vt=(0,r.A)({inputRef:ot,type:$},vt,{ref:null}):R?!j||W||Y||z||K?(vt=(0,r.A)({minRows:j||Y,rowsMax:z,maxRows:W},vt),pt=y):pt="textarea":vt=(0,r.A)({type:$},vt),o.useEffect((function(){ct&&ct.setAdornedStart(Boolean(G))}),[ct,G]),o.createElement("div",(0,r.A)({className:(0,a.A)(v.root,v["color".concat((0,f.A)(lt.color||"primary"))],m,lt.disabled&&v.disabled,lt.error&&v.error,S&&v.fullWidth,lt.focused&&v.focused,ct&&v.formControl,R&&v.multiline,G&&v.adornedStart,I&&v.adornedEnd,"dense"===lt.margin&&v.marginDense),onClick:function(t){et.current&&t.currentTarget===t.target&&et.current.focus(),M&&M(t)},ref:e},J),G,o.createElement(l.Provider,{value:null},o.createElement(pt,(0,r.A)({"aria-invalid":lt.error,"aria-describedby":n,autoComplete:h,autoFocus:p,defaultValue:g,disabled:lt.disabled,id:A,onAnimationStart:function(t){dt("mui-auto-fill-cancel"===t.animationName?et.current:{value:"x"})},name:O,placeholder:U,readOnly:q,required:lt.required,rows:j,value:Z,onKeyDown:V,onKeyUp:H},vt,{className:(0,a.A)(v.input,N.className,lt.disabled&&v.disabled,R&&v.inputMultiline,lt.hiddenLabel&&v.inputHiddenLabel,G&&v.inputAdornedStart,I&&v.inputAdornedEnd,"search"===$&&v.inputTypeSearch,"dense"===lt.margin&&v.inputMarginDense),onBlur:function(t){L&&L(t),N.onBlur&&N.onBlur(t),ct&&ct.onBlur?ct.onBlur(t):ut(!1)},onChange:function(t){if(!tt){var e=t.target||et.current;if(null==e)throw new Error((0,s.A)(1));dt({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];N.onChange&&N.onChange.apply(N,[t].concat(r)),P&&P.apply(void 0,[t].concat(r))},onFocus:function(t){lt.disabled?t.stopPropagation():(F&&F(t),N.onFocus&&N.onFocus(t),ct&&ct.onFocus?ct.onFocus(t):ut(!0))}}))),I,B?B((0,r.A)({},lt,{startAdornment:G})):null)}));const T=(0,h.A)((function(t){var e="light"===t.palette.type,n={color:"currentColor",opacity:e?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},i={opacity:"0 !important"},o={opacity:e?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,r.A)({},t.typography.body1,{color:t.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:t.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(I);var S=o.forwardRef((function(t,e){var n=t.disableUnderline,s=t.classes,u=t.fullWidth,c=void 0!==u&&u,l=t.inputComponent,h=void 0===l?"input":l,f=t.multiline,d=void 0!==f&&f,p=t.type,v=void 0===p?"text":p,m=(0,i.A)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(T,(0,r.A)({classes:(0,r.A)({},s,{root:(0,a.A)(s.root,!n&&s.underline),underline:null}),fullWidth:c,inputComponent:h,multiline:d,ref:e,type:v},m))}));S.muiName="Input";const A=(0,h.A)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(e),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(t.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(e)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(S);var _=o.forwardRef((function(t,e){var n=t.disableUnderline,s=t.classes,u=t.fullWidth,c=void 0!==u&&u,l=t.inputComponent,h=void 0===l?"input":l,f=t.multiline,d=void 0!==f&&f,p=t.type,v=void 0===p?"text":p,m=(0,i.A)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(T,(0,r.A)({classes:(0,r.A)({},s,{root:(0,a.A)(s.root,!n&&s.underline),underline:null}),fullWidth:c,inputComponent:h,multiline:d,ref:e,type:v},m))}));_.muiName="Input";const x=(0,h.A)((function(t){var e="light"===t.palette.type,n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:e?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(t.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(_);var C=n(4467),N=n(6232),D=o.forwardRef((function(t,e){t.children;var n=t.classes,s=t.className,u=t.label,c=t.labelWidth,l=t.notched,h=t.style,d=(0,i.A)(t,["children","classes","className","label","labelWidth","notched","style"]),p="rtl"===(0,N.A)().direction?"right":"left";if(void 0!==u)return o.createElement("fieldset",(0,r.A)({"aria-hidden":!0,className:(0,a.A)(n.root,s),ref:e,style:h},d),o.createElement("legend",{className:(0,a.A)(n.legendLabelled,l&&n.legendNotched)},u?o.createElement("span",null,u):o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var v=c>0?.75*c+8:.01;return o.createElement("fieldset",(0,r.A)({"aria-hidden":!0,style:(0,r.A)((0,C.A)({},"padding".concat((0,f.A)(p)),8),h),className:(0,a.A)(n.root,s),ref:e},d),o.createElement("legend",{className:n.legend,style:{width:l?v:.01}},o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))}));const k=(0,h.A)((function(t){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(D);var R=o.forwardRef((function(t,e){var n=t.classes,s=t.fullWidth,u=void 0!==s&&s,c=t.inputComponent,l=void 0===c?"input":c,h=t.label,f=t.labelWidth,d=void 0===f?0:f,p=t.multiline,v=void 0!==p&&p,m=t.notched,g=t.type,y=void 0===g?"text":g,b=(0,i.A)(t,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return o.createElement(T,(0,r.A)({renderSuffix:function(t){return o.createElement(k,{className:n.notchedOutline,label:h,labelWidth:d,notched:void 0!==m?m:Boolean(t.startAdornment||t.filled||t.focused)})},classes:(0,r.A)({},n,{root:(0,a.A)(n.root,n.underline),notchedOutline:null}),fullWidth:u,inputComponent:l,multiline:v,ref:e,type:y},b))}));R.muiName="Input";const O=(0,h.A)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:t.shape.borderRadius,"&:hover $notchedOutline":{borderColor:t.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:e}},"&$focused $notchedOutline":{borderColor:t.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:t.palette.error.main},"&$disabled $notchedOutline":{borderColor:t.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:t.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:e},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(R);function L(){return o.useContext(l)}var P=o.forwardRef((function(t,e){var n=t.children,s=t.classes,c=t.className,l=(t.color,t.component),h=void 0===l?"label":l,d=(t.disabled,t.error,t.filled,t.focused,t.required,(0,i.A)(t,["children","classes","className","color","component","disabled","error","filled","focused","required"])),p=u({props:t,muiFormControl:L(),states:["color","required","focused","disabled","error","filled"]});return o.createElement(h,(0,r.A)({className:(0,a.A)(s.root,s["color".concat((0,f.A)(p.color||"primary"))],c,p.disabled&&s.disabled,p.error&&s.error,p.filled&&s.filled,p.focused&&s.focused,p.required&&s.required),ref:e},d),n,p.required&&o.createElement("span",{"aria-hidden":!0,className:(0,a.A)(s.asterisk,p.error&&s.error)}," ","*"))}));const M=(0,h.A)((function(t){return{root:(0,r.A)({color:t.palette.text.secondary},t.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:t.palette.primary.main},"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),colorSecondary:{"&$focused":{color:t.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:t.palette.error.main}}}}),{name:"MuiFormLabel"})(P);var F=o.forwardRef((function(t,e){var n=t.classes,s=t.className,c=t.disableAnimation,l=void 0!==c&&c,h=(t.margin,t.shrink),f=(t.variant,(0,i.A)(t,["classes","className","disableAnimation","margin","shrink","variant"])),d=L(),p=h;void 0===p&&d&&(p=d.filled||d.focused||d.adornedStart);var v=u({props:t,muiFormControl:d,states:["margin","variant"]});return o.createElement(M,(0,r.A)({"data-shrink":p,className:(0,a.A)(n.root,s,d&&n.formControl,!l&&n.animated,p&&n.shrink,"dense"===v.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[v.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:e},f))}));const V=(0,h.A)((function(t){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:t.transitions.create(["color","transform"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(F);function H(t,e){return o.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}var U=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.color,h=void 0===c?"primary":c,d=t.component,p=void 0===d?"div":d,v=t.disabled,m=void 0!==v&&v,g=t.error,y=void 0!==g&&g,b=t.fullWidth,E=void 0!==b&&b,I=t.focused,T=t.hiddenLabel,S=void 0!==T&&T,A=t.margin,_=void 0===A?"none":A,x=t.required,C=void 0!==x&&x,N=t.size,D=t.variant,k=void 0===D?"standard":D,R=(0,i.A)(t,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),O=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){if(H(e,["Input","Select"])){var n=H(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)}})),t})),L=O[0],P=O[1],M=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){H(e,["Input","Select"])&&w(e.props,!0)&&(t=!0)})),t})),F=M[0],V=M[1],U=o.useState(!1),q=U[0],B=U[1],j=void 0!==I?I:q;m&&j&&B(!1);var z=o.useCallback((function(){V(!0)}),[]),K={adornedStart:L,setAdornedStart:P,color:h,disabled:m,error:y,filled:F,focused:j,fullWidth:E,hiddenLabel:S,margin:("small"===N?"dense":void 0)||_,onBlur:function(){B(!1)},onEmpty:o.useCallback((function(){V(!1)}),[]),onFilled:z,onFocus:function(){B(!0)},registerEffect:void 0,required:C,variant:k};return o.createElement(l.Provider,{value:K},o.createElement(p,(0,r.A)({className:(0,a.A)(s.root,u,"none"!==_&&s["margin".concat((0,f.A)(_))],E&&s.fullWidth),ref:e},R),n))}));const q=(0,h.A)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(U);var B=o.forwardRef((function(t,e){var n=t.children,s=t.classes,c=t.className,l=t.component,h=void 0===l?"p":l,f=(t.disabled,t.error,t.filled,t.focused,t.margin,t.required,t.variant,(0,i.A)(t,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),d=u({props:t,muiFormControl:L(),states:["variant","margin","disabled","error","filled","focused","required"]});return o.createElement(h,(0,r.A)({className:(0,a.A)(s.root,("filled"===d.variant||"outlined"===d.variant)&&s.contained,c,d.disabled&&s.disabled,d.error&&s.error,d.filled&&s.filled,d.focused&&s.focused,d.required&&s.required,"dense"===d.margin&&s.marginDense),ref:e},f)," "===n?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)}));const j=(0,h.A)((function(t){return{root:(0,r.A)({color:t.palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(B);var z=n(3043),K=n(296),W=n(2284);function Y(t){return t&&t.ownerDocument||document}n(4363);var G=n(961);function Q(t){return Y(t).defaultView||window}function $(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}var X=n(2143),J=n(6081),Z=n(4960),tt="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;const et=o.forwardRef((function(t,e){var n=t.children,r=t.container,i=t.disablePortal,a=void 0!==i&&i,s=t.onRendered,u=o.useState(null),c=u[0],l=u[1],h=(0,d.A)(o.isValidElement(n)?n.ref:null,e);return tt((function(){a||l(function(t){return t="function"==typeof t?t():t,G.findDOMNode(t)}(r)||document.body)}),[r,a]),tt((function(){if(c&&!a)return(0,Z.A)(e,c),function(){(0,Z.A)(e,null)}}),[e,c,a]),tt((function(){s&&(c||a)&&s()}),[s,c,a]),a?o.isValidElement(n)?o.cloneElement(n,{ref:h}):n:c?G.createPortal(n,c):c}));var nt=n(2319),rt=n(9474),it=n(2901),ot=n(5458);function at(){var t=document.createElement("div");t.style.width="99px",t.style.height="99px",t.style.position="absolute",t.style.top="-9999px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function st(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function ut(t){return parseInt(window.getComputedStyle(t)["padding-right"],10)||0}function ct(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[e,n].concat((0,ot.A)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,(function(t){1===t.nodeType&&-1===o.indexOf(t)&&-1===a.indexOf(t.tagName)&&st(t,i)}))}function lt(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}var ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modals=[],this.containers=[]}return(0,it.A)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&st(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){t.getAttribute&&"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);ct(e,t.mountNode,t.modalRef,r,!0);var i=lt(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(t,e){var n=lt(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=function(t,e){var n,r=[],i=[],o=t.container;if(!e.disableScrollLock){if(function(t){var e=Y(t);return e.body===t?Q(e).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(o)){var a=at();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(ut(o)+a,"px"),n=Y(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(t){i.push(t.style.paddingRight),t.style.paddingRight="".concat(ut(t)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(t,e){i[e]?t.style.paddingRight=i[e]:t.style.removeProperty("padding-right")})),r.forEach((function(t){var e=t.value,n=t.el,r=t.key;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}(r,e))}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);if(-1===e)return e;var n=lt(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&st(t.modalRef,!0),ct(r.container,t.mountNode,t.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&st(i.modalRef,!1)}return e}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}();const ft=function(t){var e=t.children,n=t.disableAutoFocus,r=void 0!==n&&n,i=t.disableEnforceFocus,a=void 0!==i&&i,s=t.disableRestoreFocus,u=void 0!==s&&s,c=t.getDoc,l=t.isEnabled,h=t.open,f=o.useRef(),p=o.useRef(null),v=o.useRef(null),m=o.useRef(),g=o.useRef(null),y=o.useCallback((function(t){g.current=G.findDOMNode(t)}),[]),b=(0,d.A)(e.ref,y),w=o.useRef();return o.useEffect((function(){w.current=h}),[h]),!w.current&&h&&"undefined"!=typeof window&&(m.current=c().activeElement),o.useEffect((function(){if(h){var t=Y(g.current);r||!g.current||g.current.contains(t.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex",-1),g.current.focus());var e=function(){null!==g.current&&(t.hasFocus()&&!a&&l()&&!f.current?g.current&&!g.current.contains(t.activeElement)&&g.current.focus():f.current=!1)},n=function(e){!a&&l()&&9===e.keyCode&&t.activeElement===g.current&&(f.current=!0,e.shiftKey?v.current.focus():p.current.focus())};t.addEventListener("focus",e,!0),t.addEventListener("keydown",n,!0);var i=setInterval((function(){e()}),50);return function(){clearInterval(i),t.removeEventListener("focus",e,!0),t.removeEventListener("keydown",n,!0),u||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[r,a,u,l,h]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelStart"}),o.cloneElement(e,{ref:b}),o.createElement("div",{tabIndex:0,ref:v,"data-test":"sentinelEnd"}))};var dt={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}};const pt=o.forwardRef((function(t,e){var n=t.invisible,a=void 0!==n&&n,s=t.open,u=(0,i.A)(t,["invisible","open"]);return s?o.createElement("div",(0,r.A)({"aria-hidden":!0,ref:e},u,{style:(0,r.A)({},dt.root,a?dt.invisible:{},u.style)})):null}));var vt=new ht;const mt=o.forwardRef((function(t,e){var n=(0,X.A)(),a=(0,J.A)({name:"MuiModal",props:(0,r.A)({},t),theme:n}),s=a.BackdropComponent,u=void 0===s?pt:s,c=a.BackdropProps,l=a.children,h=a.closeAfterTransition,f=void 0!==h&&h,p=a.container,v=a.disableAutoFocus,m=void 0!==v&&v,g=a.disableBackdropClick,y=void 0!==g&&g,b=a.disableEnforceFocus,w=void 0!==b&&b,E=a.disableEscapeKeyDown,I=void 0!==E&&E,T=a.disablePortal,S=void 0!==T&&T,A=a.disableRestoreFocus,_=void 0!==A&&A,x=a.disableScrollLock,C=void 0!==x&&x,N=a.hideBackdrop,D=void 0!==N&&N,k=a.keepMounted,R=void 0!==k&&k,O=a.manager,L=void 0===O?vt:O,P=a.onBackdropClick,M=a.onClose,F=a.onEscapeKeyDown,V=a.onRendered,H=a.open,U=(0,i.A)(a,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),q=o.useState(!0),B=q[0],j=q[1],z=o.useRef({}),K=o.useRef(null),W=o.useRef(null),Q=(0,d.A)(W,e),Z=function(t){return!!t.children&&t.children.props.hasOwnProperty("in")}(a),tt=function(){return Y(K.current)},it=function(){return z.current.modalRef=W.current,z.current.mountNode=K.current,z.current},ot=function(){L.mount(it(),{disableScrollLock:C}),W.current.scrollTop=0},at=(0,nt.A)((function(){var t=function(t){return t="function"==typeof t?t():t,G.findDOMNode(t)}(p)||tt().body;L.add(it(),t),W.current&&ot()})),ut=o.useCallback((function(){return L.isTopModal(it())}),[L]),ct=(0,nt.A)((function(t){K.current=t,t&&(V&&V(),H&&ut()?ot():st(W.current,!0))})),lt=o.useCallback((function(){L.remove(it())}),[L]);if(o.useEffect((function(){return function(){lt()}}),[lt]),o.useEffect((function(){H?at():Z&&f||lt()}),[H,lt,Z,f,at]),!R&&!H&&(!Z||B))return null;var ht=function(t){return{root:{position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:rt.A}),dt={};return void 0===l.props.tabIndex&&(dt.tabIndex=l.props.tabIndex||"-1"),Z&&(dt.onEnter=$((function(){j(!1)}),l.props.onEnter),dt.onExited=$((function(){j(!0),f&&lt()}),l.props.onExited)),o.createElement(et,{ref:ct,container:p,disablePortal:S},o.createElement("div",(0,r.A)({ref:Q,onKeyDown:function(t){"Escape"===t.key&&ut()&&(F&&F(t),I||(t.stopPropagation(),M&&M(t,"escapeKeyDown")))},role:"presentation"},U,{style:(0,r.A)({},ht.root,!H&&B?ht.hidden:{},U.style)}),D?null:o.createElement(u,(0,r.A)({open:H,onClick:function(t){t.target===t.currentTarget&&(P&&P(t),!y&&M&&M(t,"backdropClick"))}},c)),o.createElement(ft,{disableEnforceFocus:w,disableAutoFocus:m,disableRestoreFocus:_,getDoc:tt,isEnabled:ut,open:H},o.cloneElement(l,dt))))}));var gt=n(7353),yt=n(3173);function bt(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var wt={entering:{opacity:1,transform:bt(1)},entered:{opacity:1,transform:"none"}},Et=o.forwardRef((function(t,e){var n=t.children,a=t.disableStrictModeCompat,s=void 0!==a&&a,u=t.in,c=t.onEnter,l=t.onEntered,h=t.onEntering,f=t.onExit,p=t.onExited,v=t.onExiting,m=t.style,g=t.timeout,y=void 0===g?"auto":g,b=t.TransitionComponent,w=void 0===b?gt.Ay:b,E=(0,i.A)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),I=o.useRef(),T=o.useRef(),S=(0,N.A)(),A=S.unstable_strictMode&&!s,_=o.useRef(null),x=(0,d.A)(n.ref,e),C=(0,d.A)(A?_:void 0,x),D=function(t){return function(e,n){if(t){var r=A?[_.current,e]:[e,n],i=(0,K.A)(r,2),o=i[0],a=i[1];void 0===a?t(o):t(o,a)}}},k=D(h),R=D((function(t,e){(0,yt.q)(t);var n,r=(0,yt.c)({style:m,timeout:y},{mode:"enter"}),i=r.duration,o=r.delay;"auto"===y?(n=S.transitions.getAutoHeightDuration(t.clientHeight),T.current=n):n=i,t.style.transition=[S.transitions.create("opacity",{duration:n,delay:o}),S.transitions.create("transform",{duration:.666*n,delay:o})].join(","),c&&c(t,e)})),O=D(l),L=D(v),P=D((function(t){var e,n=(0,yt.c)({style:m,timeout:y},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===y?(e=S.transitions.getAutoHeightDuration(t.clientHeight),T.current=e):e=r,t.style.transition=[S.transitions.create("opacity",{duration:e,delay:i}),S.transitions.create("transform",{duration:.666*e,delay:i||.333*e})].join(","),t.style.opacity="0",t.style.transform=bt(.75),f&&f(t)})),M=D(p);return o.useEffect((function(){return function(){clearTimeout(I.current)}}),[]),o.createElement(w,(0,r.A)({appear:!0,in:u,nodeRef:A?_:void 0,onEnter:R,onEntered:O,onEntering:k,onExit:P,onExited:M,onExiting:L,addEndListener:function(t,e){var n=A?t:e;"auto"===y&&(I.current=setTimeout(n,T.current||0))},timeout:"auto"===y?null:y},E),(function(t,e){return o.cloneElement(n,(0,r.A)({style:(0,r.A)({opacity:0,transform:bt(.75),visibility:"exited"!==t||u?void 0:"hidden"},wt[t],m,n.props.style),ref:C},e))}))}));Et.muiSupportAuto=!0;const It=Et;var Tt=n(3148);function St(t,e){var n=0;return"number"==typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function At(t,e){var n=0;return"number"==typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function _t(t){return[t.horizontal,t.vertical].map((function(t){return"number"==typeof t?"".concat(t,"px"):t})).join(" ")}function xt(t){return"function"==typeof t?t():t}var Ct=o.forwardRef((function(t,e){var n=t.action,s=t.anchorEl,u=t.anchorOrigin,c=void 0===u?{vertical:"top",horizontal:"left"}:u,l=t.anchorPosition,h=t.anchorReference,f=void 0===h?"anchorEl":h,d=t.children,v=t.classes,m=t.className,g=t.container,y=t.elevation,b=void 0===y?8:y,w=t.getContentAnchorEl,E=t.marginThreshold,I=void 0===E?16:E,T=t.onEnter,S=t.onEntered,A=t.onEntering,_=t.onExit,x=t.onExited,C=t.onExiting,N=t.open,D=t.PaperProps,k=void 0===D?{}:D,R=t.transformOrigin,O=void 0===R?{vertical:"top",horizontal:"left"}:R,L=t.TransitionComponent,P=void 0===L?It:L,M=t.transitionDuration,F=void 0===M?"auto":M,V=t.TransitionProps,H=void 0===V?{}:V,U=(0,i.A)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),q=o.useRef(),B=o.useCallback((function(t){if("anchorPosition"===f)return l;var e=xt(s),n=(e&&1===e.nodeType?e:Y(q.current).body).getBoundingClientRect(),r=0===t?c.vertical:"center";return{top:n.top+St(n,r),left:n.left+At(n,c.horizontal)}}),[s,c.horizontal,c.vertical,l,f]),j=o.useCallback((function(t){var e=0;if(w&&"anchorEl"===f){var n=w(t);if(n&&t.contains(n)){var r=function(t,e){for(var n=e,r=0;n&&n!==t;)r+=(n=n.parentElement).scrollTop;return r}(t,n);e=n.offsetTop+n.clientHeight/2-r||0}}return e}),[c.vertical,f,w]),z=o.useCallback((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:St(t,O.vertical)+e,horizontal:At(t,O.horizontal)}}),[O.horizontal,O.vertical]),K=o.useCallback((function(t){var e=j(t),n={width:t.offsetWidth,height:t.offsetHeight},r=z(n,e);if("none"===f)return{top:null,left:null,transformOrigin:_t(r)};var i=B(e),o=i.top-r.vertical,a=i.left-r.horizontal,u=o+n.height,c=a+n.width,l=Q(xt(s)),h=l.innerHeight-I,d=l.innerWidth-I;if(o<I){var p=o-I;o-=p,r.vertical+=p}else if(u>h){var v=u-h;o-=v,r.vertical+=v}if(a<I){var m=a-I;a-=m,r.horizontal+=m}else if(c>d){var g=c-d;a-=g,r.horizontal+=g}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:_t(r)}}),[s,f,B,j,z,I]),W=o.useCallback((function(){var t=q.current;if(t){var e=K(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin}}),[K]),X=o.useCallback((function(t){q.current=G.findDOMNode(t)}),[]);o.useEffect((function(){N&&W()})),o.useImperativeHandle(n,(function(){return N?{updatePosition:function(){W()}}:null}),[N,W]),o.useEffect((function(){if(N){var t=p((function(){W()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}}),[N,W]);var J=F;"auto"!==F||P.muiSupportAuto||(J=void 0);var Z=g||(s?Y(xt(s)).body:void 0);return o.createElement(mt,(0,r.A)({container:Z,open:N,ref:e,BackdropProps:{invisible:!0},className:(0,a.A)(v.root,m)},U),o.createElement(P,(0,r.A)({appear:!0,in:N,onEnter:T,onEntered:S,onExit:_,onExited:x,onExiting:C,timeout:J},H,{onEntering:$((function(t,e){A&&A(t,e),W()}),H.onEntering)}),o.createElement(Tt.A,(0,r.A)({elevation:b,ref:X},k,{className:(0,a.A)(v.paper,k.className)}),d)))}));const Nt=(0,h.A)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(Ct),Dt=o.createContext({});var kt=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.component,l=void 0===c?"ul":c,h=t.dense,f=void 0!==h&&h,d=t.disablePadding,p=void 0!==d&&d,v=t.subheader,m=(0,i.A)(t,["children","classes","className","component","dense","disablePadding","subheader"]),g=o.useMemo((function(){return{dense:f}}),[f]);return o.createElement(Dt.Provider,{value:g},o.createElement(l,(0,r.A)({className:(0,a.A)(s.root,u,f&&s.dense,!p&&s.padding,v&&s.subheader),ref:e},m),v,n))}));const Rt=(0,h.A)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(kt);function Ot(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Lt(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Pt(t,e){if(void 0===e)return!0;var n=t.innerText;return void 0===n&&(n=t.textContent),0!==(n=n.trim().toLowerCase()).length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function Mt(t,e,n,r,i,o){for(var a=!1,s=i(t,e,!!e&&n);s;){if(s===t.firstChild){if(a)return;a=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Pt(s,o)&&!u)return void s.focus();s=i(t,s,n)}}var Ft="undefined"==typeof window?o.useEffect:o.useLayoutEffect;const Vt=o.forwardRef((function(t,e){var n=t.actions,a=t.autoFocus,s=void 0!==a&&a,u=t.autoFocusItem,c=void 0!==u&&u,l=t.children,h=t.className,f=t.disabledItemsFocusable,p=void 0!==f&&f,v=t.disableListWrap,m=void 0!==v&&v,g=t.onKeyDown,y=t.variant,b=void 0===y?"selectedMenu":y,w=(0,i.A)(t,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),E=o.useRef(null),I=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ft((function(){s&&E.current.focus()}),[s]),o.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(t,e){var n=!E.current.style.width;if(t.clientHeight<E.current.clientHeight&&n){var r="".concat(at(),"px");E.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=r,E.current.style.width="calc(100% + ".concat(r,")")}return E.current}}}),[]);var T=o.useCallback((function(t){E.current=G.findDOMNode(t)}),[]),S=(0,d.A)(T,e),A=-1;o.Children.forEach(l,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("selectedMenu"===b&&t.props.selected||-1===A)&&(A=e))}));var _=o.Children.map(l,(function(t,e){if(e===A){var n={};return c&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===b&&(n.tabIndex=0),o.cloneElement(t,n)}return t}));return o.createElement(Rt,(0,r.A)({role:"menu",ref:S,className:h,onKeyDown:function(t){var e=E.current,n=t.key,r=Y(e).activeElement;if("ArrowDown"===n)t.preventDefault(),Mt(e,r,m,p,Ot);else if("ArrowUp"===n)t.preventDefault(),Mt(e,r,m,p,Lt);else if("Home"===n)t.preventDefault(),Mt(e,null,m,p,Ot);else if("End"===n)t.preventDefault(),Mt(e,null,m,p,Lt);else if(1===n.length){var i=I.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&Pt(r,i);i.previousKeyMatched&&(s||Mt(e,r,!1,p,Ot,i))?t.preventDefault():i.previousKeyMatched=!1}g&&g(t)},tabIndex:s?0:-1},w),_)}));var Ht={vertical:"top",horizontal:"right"},Ut={vertical:"top",horizontal:"left"},qt=o.forwardRef((function(t,e){var n=t.autoFocus,s=void 0===n||n,u=t.children,c=t.classes,l=t.disableAutoFocusItem,h=void 0!==l&&l,f=t.MenuListProps,d=void 0===f?{}:f,p=t.onClose,v=t.onEntering,m=t.open,g=t.PaperProps,y=void 0===g?{}:g,b=t.PopoverClasses,w=t.transitionDuration,E=void 0===w?"auto":w,I=t.TransitionProps,T=(I=void 0===I?{}:I).onEntering,S=(0,i.A)(I,["onEntering"]),A=t.variant,_=void 0===A?"selectedMenu":A,x=(0,i.A)(t,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),C=(0,N.A)(),D=s&&!h&&m,k=o.useRef(null),R=o.useRef(null),O=-1;o.Children.map(u,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("menu"!==_&&t.props.selected||-1===O)&&(O=e))}));var L=o.Children.map(u,(function(t,e){return e===O?o.cloneElement(t,{ref:function(e){R.current=G.findDOMNode(e),(0,Z.A)(t.ref,e)}}):t}));return o.createElement(Nt,(0,r.A)({getContentAnchorEl:function(){return R.current},classes:b,onClose:p,TransitionProps:(0,r.A)({onEntering:function(t,e){k.current&&k.current.adjustStyleForScrollbar(t,C),v&&v(t,e),T&&T(t,e)}},S),anchorOrigin:"rtl"===C.direction?Ht:Ut,transformOrigin:"rtl"===C.direction?Ht:Ut,PaperProps:(0,r.A)({},y,{classes:(0,r.A)({},y.classes,{root:c.paper})}),open:m,ref:e,transitionDuration:E},x),o.createElement(Vt,(0,r.A)({onKeyDown:function(t){"Tab"===t.key&&(t.preventDefault(),p&&p(t,"tabKeyDown"))},actions:k,autoFocus:s&&(-1===O||h),autoFocusItem:D,variant:_},d,{className:(0,a.A)(c.list,d.className)}),L))}));const Bt=(0,h.A)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(qt);function jt(t,e){return"object"===(0,W.A)(e)&&null!==e?t===e:String(t)===String(e)}var zt=o.forwardRef((function(t,e){var n=t["aria-label"],u=t.autoFocus,c=t.autoWidth,l=t.children,h=t.classes,p=t.className,v=t.defaultValue,m=t.disabled,g=t.displayEmpty,y=t.IconComponent,b=t.inputRef,E=t.labelId,I=t.MenuProps,T=void 0===I?{}:I,S=t.multiple,A=t.name,_=t.onBlur,x=t.onChange,C=t.onClose,N=t.onFocus,D=t.onOpen,k=t.open,R=t.readOnly,O=t.renderValue,L=t.SelectDisplayProps,P=void 0===L?{}:L,M=t.tabIndex,F=(t.type,t.value),V=t.variant,H=void 0===V?"standard":V,U=(0,i.A)(t,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),q=function(t){var e=t.controlled,n=t.default,r=o.useRef(void 0!==e).current,i=o.useState(n),a=i[0],s=i[1];return[r?e:a,o.useCallback((function(t){r||s(t)}),[])]}({controlled:F,default:v,name:"Select"}),B=(0,K.A)(q,2),j=B[0],z=B[1],W=o.useRef(null),G=o.useState(null),Q=G[0],$=G[1],X=o.useRef(null!=k).current,J=o.useState(),Z=J[0],tt=J[1],et=o.useState(!1),nt=et[0],rt=et[1],it=(0,d.A)(e,b);o.useImperativeHandle(it,(function(){return{focus:function(){Q.focus()},node:W.current,value:j}}),[Q,j]),o.useEffect((function(){u&&Q&&Q.focus()}),[u,Q]),o.useEffect((function(){if(Q){var t=Y(Q).getElementById(E);if(t){var e=function(){getSelection().isCollapsed&&Q.focus()};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}}),[E,Q]);var ot,at,st=function(t,e){t?D&&D(e):C&&C(e),X||(tt(c?null:Q.clientWidth),rt(t))},ut=o.Children.toArray(l),ct=function(t){return function(e){var n;if(S||st(!1,e),S){n=Array.isArray(j)?j.slice():[];var r=j.indexOf(t.props.value);-1===r?n.push(t.props.value):n.splice(r,1)}else n=t.props.value;t.props.onClick&&t.props.onClick(e),j!==n&&(z(n),x&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:n,name:A}}),x(e,t)))}},lt=null!==Q&&(X?k:nt);delete U["aria-invalid"];var ht=[],ft=!1;(w({value:j})||g)&&(O?ot=O(j):ft=!0);var dt=ut.map((function(t){if(!o.isValidElement(t))return null;var e;if(S){if(!Array.isArray(j))throw new Error((0,s.A)(2));(e=j.some((function(e){return jt(e,t.props.value)})))&&ft&&ht.push(t.props.children)}else(e=jt(j,t.props.value))&&ft&&(at=t.props.children);return o.cloneElement(t,{"aria-selected":e?"true":void 0,onClick:ct(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:e,value:void 0,"data-value":t.props.value})}));ft&&(ot=S?ht.join(", "):at);var pt,vt=Z;!c&&X&&Q&&(vt=Q.clientWidth),pt=void 0!==M?M:m?null:0;var mt=P.id||(A?"mui-component-select-".concat(A):void 0);return o.createElement(o.Fragment,null,o.createElement("div",(0,r.A)({className:(0,a.A)(h.root,h.select,h.selectMenu,h[H],p,m&&h.disabled),ref:$,tabIndex:pt,role:"button","aria-disabled":m?"true":void 0,"aria-expanded":lt?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[E,mt].filter(Boolean).join(" ")||void 0,onKeyDown:function(t){R||-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),st(!0,t))},onMouseDown:m||R?null:function(t){0===t.button&&(t.preventDefault(),Q.focus(),st(!0,t))},onBlur:function(t){!lt&&_&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:j,name:A}}),_(t))},onFocus:N},P,{id:mt}),function(t){return null==t||"string"==typeof t&&!t.trim()}(ot)?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ot),o.createElement("input",(0,r.A)({value:Array.isArray(j)?j.join(","):j,name:A,ref:W,"aria-hidden":!0,onChange:function(t){var e=ut.map((function(t){return t.props.value})).indexOf(t.target.value);if(-1!==e){var n=ut[e];z(n.props.value),x&&x(t,n)}},tabIndex:-1,className:h.nativeInput,autoFocus:u},U)),o.createElement(y,{className:(0,a.A)(h.icon,h["icon".concat((0,f.A)(H))],lt&&h.iconOpen,m&&h.disabled)}),o.createElement(Bt,(0,r.A)({id:"menu-".concat(A||""),anchorEl:Q,open:lt,onClose:function(t){st(!1,t)}},T,{MenuListProps:(0,r.A)({"aria-labelledby":E,role:"listbox",disableListWrap:!0},T.MenuListProps),PaperProps:(0,r.A)({},T.PaperProps,{style:(0,r.A)({minWidth:vt},null!=T.PaperProps?T.PaperProps.style:null)})}),dt))}));const Kt=zt,Wt=(0,n(4507).A)(o.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Yt=o.forwardRef((function(t,e){var n=t.classes,s=t.className,u=t.disabled,c=t.IconComponent,l=t.inputRef,h=t.variant,d=void 0===h?"standard":h,p=(0,i.A)(t,["classes","className","disabled","IconComponent","inputRef","variant"]);return o.createElement(o.Fragment,null,o.createElement("select",(0,r.A)({className:(0,a.A)(n.root,n.select,n[d],s,u&&n.disabled),disabled:u,ref:l||e},p)),t.multiple?null:o.createElement(c,{className:(0,a.A)(n.icon,n["icon".concat((0,f.A)(d))],u&&n.disabled)}))}));var Gt=function(t){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===t.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:t.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:t.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:t.palette.action.active,"&$disabled":{color:t.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},Qt=o.createElement(A,null),$t=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.IconComponent,c=void 0===s?Wt:s,l=t.input,h=void 0===l?Qt:l,f=t.inputProps,d=(t.variant,(0,i.A)(t,["children","classes","IconComponent","input","inputProps","variant"])),p=u({props:t,muiFormControl:L(),states:["variant"]});return o.cloneElement(h,(0,r.A)({inputComponent:Yt,inputProps:(0,r.A)({children:n,classes:a,IconComponent:c,variant:p.variant,type:void 0},f,h?h.props.inputProps:{}),ref:e},d))}));$t.muiName="Select",(0,h.A)(Gt,{name:"MuiNativeSelect"})($t);var Xt=Gt,Jt=o.createElement(A,null),Zt=o.createElement(x,null),te=o.forwardRef((function t(e,n){var a=e.autoWidth,s=void 0!==a&&a,c=e.children,l=e.classes,h=e.displayEmpty,f=void 0!==h&&h,d=e.IconComponent,p=void 0===d?Wt:d,v=e.id,m=e.input,g=e.inputProps,y=e.label,b=e.labelId,w=e.labelWidth,E=void 0===w?0:w,I=e.MenuProps,T=e.multiple,S=void 0!==T&&T,A=e.native,_=void 0!==A&&A,x=e.onClose,C=e.onOpen,N=e.open,D=e.renderValue,k=e.SelectDisplayProps,R=e.variant,P=void 0===R?"standard":R,M=(0,i.A)(e,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),F=_?Yt:Kt,V=u({props:e,muiFormControl:L(),states:["variant"]}).variant||P,H=m||{standard:Jt,outlined:o.createElement(O,{label:y,labelWidth:E}),filled:Zt}[V];return o.cloneElement(H,(0,r.A)({inputComponent:F,inputProps:(0,r.A)({children:c,IconComponent:p,variant:V,type:void 0,multiple:S},_?{id:v}:{autoWidth:s,displayEmpty:f,labelId:b,MenuProps:I,onClose:x,onOpen:C,open:N,renderValue:D,SelectDisplayProps:(0,r.A)({id:v},k)},g,{classes:g?(0,z.A)({baseClasses:l,newClasses:g.classes,Component:t}):l},m?m.props.inputProps:{}),ref:n},M))}));te.muiName="Select";const ee=(0,h.A)(Xt,{name:"MuiSelect"})(te);var ne={standard:A,filled:x,outlined:O},re=o.forwardRef((function(t,e){var n=t.autoComplete,s=t.autoFocus,u=void 0!==s&&s,c=t.children,l=t.classes,h=t.className,f=t.color,d=void 0===f?"primary":f,p=t.defaultValue,v=t.disabled,m=void 0!==v&&v,g=t.error,y=void 0!==g&&g,b=t.FormHelperTextProps,w=t.fullWidth,E=void 0!==w&&w,I=t.helperText,T=t.hiddenLabel,S=t.id,A=t.InputLabelProps,_=t.inputProps,x=t.InputProps,C=t.inputRef,N=t.label,D=t.multiline,k=void 0!==D&&D,R=t.name,O=t.onBlur,L=t.onChange,P=t.onFocus,M=t.placeholder,F=t.required,H=void 0!==F&&F,U=t.rows,B=t.rowsMax,z=t.maxRows,K=t.minRows,W=t.select,Y=void 0!==W&&W,G=t.SelectProps,Q=t.type,$=t.value,X=t.variant,J=void 0===X?"standard":X,Z=(0,i.A)(t,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]),tt={};if("outlined"===J&&(A&&void 0!==A.shrink&&(tt.notched=A.shrink),N)){var et,nt=null!==(et=null==A?void 0:A.required)&&void 0!==et?et:H;tt.label=o.createElement(o.Fragment,null,N,nt&&" *")}Y&&(G&&G.native||(tt.id=void 0),tt["aria-describedby"]=void 0);var rt=I&&S?"".concat(S,"-helper-text"):void 0,it=N&&S?"".concat(S,"-label"):void 0,ot=ne[J],at=o.createElement(ot,(0,r.A)({"aria-describedby":rt,autoComplete:n,autoFocus:u,defaultValue:p,fullWidth:E,multiline:k,name:R,rows:U,rowsMax:B,maxRows:z,minRows:K,type:Q,value:$,id:S,inputRef:C,onBlur:O,onChange:L,onFocus:P,placeholder:M,inputProps:_},tt,x));return o.createElement(q,(0,r.A)({className:(0,a.A)(l.root,h),disabled:m,error:y,fullWidth:E,hiddenLabel:T,ref:e,required:H,color:d,variant:J},Z),N&&o.createElement(V,(0,r.A)({htmlFor:S,id:it},A),N),Y?o.createElement(ee,(0,r.A)({"aria-describedby":rt,id:S,labelId:it,value:$,input:at},G),c):at,I&&o.createElement(j,(0,r.A)({id:rt},b),I))}));const ie=(0,h.A)({root:{}},{name:"MuiTextField"})(re)},6232:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(2143),i=(n(6540),n(7114));function o(){return(0,r.A)()||i.A}},3173:(t,e,n)=>{n.d(e,{c:()=>i,q:()=>r});var r=function(t){return t.scrollTop};function i(t,e){var n=t.timeout,r=t.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"==typeof n?n:n[e.mode]||0,delay:i.transitionDelay}}},4507:(t,e,n)=>{n.d(e,{A:()=>h});var r=n(8168),i=n(6540),o=n(45),a=n(53),s=n(5192),u=n(7515),c=i.forwardRef((function(t,e){var n=t.children,s=t.classes,c=t.className,l=t.color,h=void 0===l?"inherit":l,f=t.component,d=void 0===f?"svg":f,p=t.fontSize,v=void 0===p?"medium":p,m=t.htmlColor,g=t.titleAccess,y=t.viewBox,b=void 0===y?"0 0 24 24":y,w=(0,o.A)(t,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return i.createElement(d,(0,r.A)({className:(0,a.A)(s.root,c,"inherit"!==h&&s["color".concat((0,u.A)(h))],"default"!==v&&"medium"!==v&&s["fontSize".concat((0,u.A)(v))]),focusable:"false",viewBox:b,color:m,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:e},w),n,g?i.createElement("title",null,g):null)}));c.muiName="SvgIcon";const l=(0,s.A)((function(t){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:t.typography.pxToRem(24),transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter})},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorAction:{color:t.palette.action.active},colorError:{color:t.palette.error.main},colorDisabled:{color:t.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:t.typography.pxToRem(20)},fontSizeLarge:{fontSize:t.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c);function h(t,e){var n=function(e,n){return i.createElement(l,(0,r.A)({ref:n},e),t)};return n.muiName=l.muiName,i.memo(i.forwardRef(n))}},4960:(t,e,n)=>{function r(t,e){"function"==typeof t?t(e):t&&(t.current=e)}n.d(e,{A:()=>r})},2319:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(6540),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function o(t){var e=r.useRef(t);return i((function(){e.current=t})),r.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}},4801:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(6540),i=n(4960);function o(t,e){return r.useMemo((function(){return null==t&&null==e?null:function(n){(0,i.A)(t,n),(0,i.A)(e,n)}}),[t,e])}},7315:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(6540);const i=(0,n(4507).A)(r.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},944:(t,e,n)=>{n.d(e,{A:()=>r.A});var r=n(9998),i="8.10.1";r.A.registerVersion("firebase",i,"app"),r.A.SDK_VERSION=i},1392:(t,e,n)=>{var r=n(9998),i=n(1635),o=n(1625),a=n(2477),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.s=this.s,this.o=this.o}var S={};T.prototype.s=!1,T.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}(this);delete S[t]}},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var A=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function x(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var D,k=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var L=f.navigator;if(L){var P=L.userAgent;if(P){D=P;break t}}D=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function F(t){var e={};for(var n in t)e[n]=t[n];return e}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<V.length;o++)n=V[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=d;var q,B,j=R(D,"Opera"),z=R(D,"Trident")||R(D,"MSIE"),K=R(D,"Edge"),W=K||z,Y=R(D,"Gecko")&&!(R(D.toLowerCase(),"webkit")&&!R(D,"Edge"))&&!(R(D,"Trident")||R(D,"MSIE"))&&!R(D,"Edge"),G=R(D.toLowerCase(),"webkit")&&!R(D,"Edge");function Q(){var t=f.document;return t?t.documentMode:void 0}t:{var $="",X=(B=D,Y?/rv:([^\);]+)(\)|;)/.exec(B):K?/Edge\/([\d\.]+)/.exec(B):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):G?/WebKit\/(\S+)/.exec(B):j?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(X&&($=X?X[1]:""),z){var J=Q();if(null!=J&&J>parseFloat($)){q=String(J);break t}}q=$}var Z,tt={};function et(){return t=tt,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=k(String(q)).split("."),n=k("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=O(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==o[2].length,0==a[2].length)||O(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}();var t}f.document&&z?Z=Q()||parseInt(q,10)||void 0:Z=void 0;var nt=Z,rt=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(t){}return t}();function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ot(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Y){t:{try{U(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ot.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},I(ot,it);var at={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),ut=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ut,this.ca=this.fa=!1}function lt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ht(t){this.src=t,this.g={},this.h=0}function ft(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=A(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ht.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new ct(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),vt={};function mt(t,e,n,r,i){if(r&&r.once)return yt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=At(n),t&&t[st]?t.N(e,n,v(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=Tt(t);if(s||(t[pt]=s=new ht(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=It;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)rt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Et(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=At(n),t&&t[st]?t.O(e,n,v(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function bt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=At(n),t&&t[st]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dt(o=t.g[e],n,r,i))&&(lt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[st])ft(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Et(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tt(e))?(ft(n,t),0==n.h&&(n.src=null,e[pt]=null)):lt(t)}}}function Et(t){return t in vt?vt[t]:vt[t]="on"+t}function It(t,e){if(t.ca)t=!0;else{e=new ot(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&wt(t),t=n.call(r,e)}return t}function Tt(t){return(t=t[pt])instanceof ht?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(t){return"function"==typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function _t(){T.call(this),this.i=new ht(this),this.P=this,this.I=null}function xt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var i=e;H(e=new it(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Ct(a,r,!0,e)&&i}if(i=Ct(a=e.g=t,r,!0,e)&&i,i=Ct(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ct(a=e.g=n[o],r,!1,e)&&i}function Ct(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&ft(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(_t,T),_t.prototype[st]=!0,_t.prototype.removeEventListener=function(t,e,n,r){bt(this,t,e,n,r)},_t.prototype.M=function(){if(_t.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)lt(n[r]);delete e.g[t],e.h--}}this.I=null},_t.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_t.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Nt=f.JSON.stringify;function Dt(){var t=Vt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var kt,Rt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ot.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ot=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Lt}),(function(t){return t.reset()})),Lt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Pt(t){f.setTimeout((function(){throw t}),0)}function Mt(t,e){kt||function(){var t=f.Promise.resolve(void 0);kt=function(){t.then(Ht)}}(),Ft||(kt(),Ft=!0),Vt.add(t,e)}var Ft=!1,Vt=new Rt;function Ht(){for(var t;t=Dt();){try{t.h.call(t.g)}catch(t){Pt(t)}var e=Ot;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function Ut(t,e){_t.call(this),this.h=t||1,this.g=e||f,this.j=w(this.kb,this),this.l=Date.now()}function qt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Bt(t,e,n){if("function"==typeof t)n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function jt(t){t.g=Bt((function(){t.g=null,t.i&&(t.i=!1,jt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}I(Ut,_t),(c=Ut.prototype).da=!1,c.S=null,c.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xt(this,"tick"),this.da&&(qt(this),this.start()))}},c.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.M=function(){Ut.Z.M.call(this),qt(this),delete this.g};var zt=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:jt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(T);function Kt(t){T.call(this),this.h=t,this.g={}}I(Kt,T);var Wt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Gt(t){M(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function Qt(){this.g=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Nt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Kt.prototype.M=function(){Kt.Z.M.call(this),Gt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qt.prototype.Aa=function(){this.g=!1},Qt.prototype.info=function(){};var Xt={},Jt=null;function Zt(){return Jt=Jt||new _t}function te(t){it.call(this,Xt.Ma,t)}function ee(t){var e=Zt();xt(e,new te(e,t))}function ne(t,e){it.call(this,Xt.STAT_EVENT,t),this.stat=e}function re(t){var e=Zt();xt(e,new ne(e,t))}function ie(t,e){it.call(this,Xt.Na,t),this.size=e}function oe(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}Xt.Ma="serverreachability",I(te,it),Xt.STAT_EVENT="statevent",I(ne,it),Xt.Na="timingevent",I(ie,it);var ae={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},se={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ue(){}function ce(t){return t.h||(t.h=t.i())}function le(){}ue.prototype.h=null;var he,fe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function de(){it.call(this,"d")}function pe(){it.call(this,"c")}function ve(){}function me(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Kt(this),this.P=ye,t=W?125:void 0,this.W=new Ut(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}I(de,it),I(pe,it),I(ve,ue),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},he=new ve;var ye=45e3,be={},we={};function Ee(t,e,n){t.K=1,t.v=ze(Ve(e)),t.s=n,t.U=!0,Ie(t,null)}function Ie(t,e){t.F=Date.now(),_e(t),t.A=Ve(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ge,t.g=or(t.l,n?e:null,!t.s),0<t.O&&(t.L=new zt(w(t.Ia,t,t.g),t.O)),Yt(t.V,t.g,"readystatechange",t.gb),e=t.H?F(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ee(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Te(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Se(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ae(t,n))==we){4==e&&(t.o=4,re(14),i=!1),$t(t.j,t.m,null,"[Incomplete Response]");break}if(r==be){t.o=4,re(15),$t(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}$t(t.j,t.m,r,null),ke(t,r)}Te(t)&&r!=we&&r!=be&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,re(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xn(e),e.L=!0,re(11))):($t(t.j,t.m,n,"[Invalid Chunked Response]"),De(t),Ne(t))}function Ae(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?we:(n=Number(e.substring(n,r)),isNaN(n)?be:(r+=1)+n>e.length?we:(e=e.substr(r,n),t.C=r+n,e))}function _e(t){t.Y=Date.now()+t.P,xe(t,t.P)}function xe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=oe(w(t.eb,t),e)}function Ce(t){t.B&&(f.clearTimeout(t.B),t.B=null)}function Ne(t){0==t.l.G||t.I||tr(t.l,t)}function De(t){Ce(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,qt(t.W),Gt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ke(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||hn(n.i,t)))if(n.I=t.N,!t.J&&hn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zn(n),Bn(n)}$n(n),re(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=oe(w(n.ab,n),6e3));if(1>=ln(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else nr(n,11)}else if((t.J||n.g==t)&&Zn(n),!N(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(fn(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,je(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=ir(r,r.H?r.la:null,r.W),d.J){dn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ce(p),_e(p)),r.g=d}else Qn(r);0<n.l.length&&Kn(n)}else"stop"!=o[0]&&"close"!=o[0]||nr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?nr(n,7):qn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ee(4)}catch(o){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)_(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Le(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Pe(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Pe(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=me.prototype).setTimeout=function(t){this.P=t},c.gb=function(t){t=t.target;var e=this.L;e&&3==Mn(t)?e.l():this.Ia(t)},c.Ia=function(t){try{if(t==this.g)t:{var e=Mn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||W||this.g&&(this.h.h||this.g.ga()||Fn(this.g)))){this.I||4!=e||7==n||ee(8==n||0>=r?3:2),Ce(this);var i=this.g.ba();this.N=i;e:if(Te(this)){var o=Fn(this.g);t="";var a=o.length,s=4==Mn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){De(this),Ne(this);var u="";break e}this.h.i=new f.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,re(12),De(this),Ne(this);break t}$t(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ke(this,i)}this.U?(Se(this,e,u),W&&this.i&&3==e&&(Yt(this.V,this.W,"tick",this.fb),this.W.start())):($t(this.j,this.m,u,null),ke(this,u)),4==e&&De(this),this.i&&!this.I&&(4==e?tr(this.l,this):(this.i=!1,_e(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,re(12)):(this.o=0,re(13)),De(this),Ne(this)}}}catch(e){}},c.fb=function(){if(this.g){var t=Mn(this.g),e=this.g.ga();this.C<e.length&&(Ce(this),Se(this,t,e),this.i&&4!=t&&_e(this))}},c.cancel=function(){this.I=!0,De(this)},c.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ee(3),re(17)),De(this),this.o=2,Ne(this)):xe(this,this.Y-t)},(c=Oe.prototype).R=function(){Le(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},c.T=function(){return Le(this),this.g.concat()},c.get=function(t,e){return Pe(this.h,t)?this.h[t]:e},c.set=function(t,e){Pe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},c.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Fe){this.g=void 0!==e?e:t.g,He(this,t.j),this.s=t.s,Ue(this,t.i),qe(this,t.m),this.l=t.l,e=t.h;var n=new Ze;n.i=e.i,e.g&&(n.g=new Oe(e.g),n.h=e.h),Be(this,n),this.o=t.o}else t&&(n=String(t).match(Me))?(this.g=!!e,He(this,n[1]||"",!0),this.s=Ke(n[2]||""),Ue(this,n[3]||"",!0),qe(this,n[4]),this.l=Ke(n[5]||"",!0),Be(this,n[6]||"",!0),this.o=Ke(n[7]||"")):(this.g=!!e,this.h=new Ze(null,this.g))}function Ve(t){return new Fe(t)}function He(t,e,n){t.j=n?Ke(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ue(t,e,n){t.i=n?Ke(e,!0):e}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Be(t,e,n){e instanceof Ze?(t.h=e,function(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=We(e,Xe)),t.h=new Ze(e,t.g))}function je(t,e,n){t.h.set(e,n)}function ze(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ke(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ye),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ye(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Ge,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?$e:Qe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,Je)),t.join("")};var Ge=/[#\/\?@]/g,Qe=/[#\?:]/g,$e=/[#\?]/g,Xe=/[#\?@]/g,Je=/#/g;function Ze(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new Oe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Pe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Pe((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Le(t)))}function nn(t,e){return tn(t),e=on(t,e),Pe(t.g.h,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.i=null,t.g.set(on(t,e),C(n)),t.h+=n.length)}function on(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(c=Ze.prototype).add=function(t,e){tn(this),this.i=null,t=on(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},c.forEach=function(t,e){tn(this),this.g.forEach((function(n,r){_(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.T=function(){tn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.R=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=x(e,this.g.get(on(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=x(e,t[n])}return e},c.set=function(t,e){return tn(this),this.i=null,nn(this,t=on(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},c.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var an=function(t,e){this.h=t,this.g=e};function sn(t){this.l=t||un,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.g&&f.g.Ea&&f.g.Ea()&&f.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var un=10;function cn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ln(t){return t.h?1:t.g?t.g.size:0}function hn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fn(t,e){t.g?t.g.add(e):t.h=e}function dn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=u(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return C(t.i)}function vn(){}function mn(){this.g=new vn}function gn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;v(t)&&(i=Nt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function yn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function bn(t){this.l=t.$b||null,this.j=t.ib||!1}function wn(t,e){_t.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=En,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sn.prototype.cancel=function(){var t,e;if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=u(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},vn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return f.JSON.parse(t,void 0)},I(bn,ue),bn.prototype.g=function(){return new wn(this.l,this.j)},bn.prototype.i=function(t){return function(){return t}}({}),I(wn,_t);var En=0;function In(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Tn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sn(t)}function Sn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(c=wn.prototype).open=function(t,e){if(this.readyState!=En)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sn(this)},c.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||f).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=En},c.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==f.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;In(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},c.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tn(this):Sn(this),3==this.readyState&&In(this)}},c.Ua=function(t){this.g&&(this.response=this.responseText=t,Tn(this))},c.Ta=function(t){this.g&&(this.response=t,Tn(this))},c.ha=function(){this.g&&Tn(this)},c.setRequestHeader=function(t,e){this.v.append(t,e)},c.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var An=f.JSON.parse;function _n(t){_t.call(this),this.headers=new Oe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xn,this.K=this.L=!1}I(_n,_t);var xn="",Cn=/^https?$/i,Nn=["POST","PUT"];function Dn(t){return"content-type"==t.toLowerCase()}function kn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Rn(t),Ln(t)}function Rn(t){t.D||(t.D=!0,xt(t,"complete"),xt(t,"error"))}function On(t){if(t.h&&void 0!==h&&(!t.C[1]||4!=Mn(t)||2!=t.ba()))if(t.v&&4==Mn(t))Bt(t.Fa,0,t);else if(xt(t,"readystatechange"),4==Mn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Me)[1]||null;if(!o&&f.self&&f.self.location){var a=f.self.location.protocol;o=a.substr(0,a.length-1)}i=!Cn.test(o?o.toLowerCase():"")}e=i}if(e)xt(t,"complete"),xt(t,"success");else{t.m=6;try{var s=2<Mn(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Rn(t)}}finally{Ln(t)}}}function Ln(t,e){if(t.g){Pn(t);var n=t.g,r=t.C[0]?d:null;t.g=null,t.C=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Pn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(f.clearTimeout(t.A),t.A=null)}function Mn(t){return t.g?t.g.readyState:0}function Fn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case xn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Vn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):je(t,e,n))}function Hn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Un(t){this.za=0,this.l=[],this.h=new Qt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hn("baseRetryDelayMs",5e3,t),this.$a=Hn("retryDelaySeedMs",1e4,t),this.Ya=Hn("forwardChannelMaxRetries",2,t),this.ra=Hn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new sn(t&&t.concurrentRequestLimit),this.Ca=new mn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function qn(t){if(jn(t),3==t.G){var e=t.V++,n=Ve(t.F);je(n,"SID",t.J),je(n,"RID",e),je(n,"TYPE","terminate"),Yn(t,n),(e=new me(t,t.h,e,void 0)).K=2,e.v=ze(Ve(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.v.toString(),"")),!n&&f.Image&&((new Image).src=e.v,n=!0),n||(e.g=or(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_e(e)}rr(t)}function Bn(t){t.g&&(Xn(t),t.g.cancel(),t.g=null)}function jn(t){Bn(t),t.u&&(f.clearTimeout(t.u),t.u=null),Zn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&f.clearTimeout(t.m),t.m=null)}function zn(t,e){t.l.push(new an(t.Za++,e)),3==t.G&&Kn(t)}function Kn(t){cn(t.i)||t.m||(t.m=!0,Mt(t.Ha,t),t.C=0)}function Wn(t,e){var n;n=e?e.m:t.V++;var r=Ve(t.F);je(r,"SID",t.J),je(r,"RID",n),je(r,"AID",t.U),Yn(t,r),t.o&&t.s&&Vn(r,t.o,t.s),n=new me(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Gn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),fn(t.i,n),Ee(n,r,e)}function Yn(t,e){t.j&&Re({},(function(t,n){je(e,n,t)}))}function Gn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?w(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{gn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Qn(t){t.g||t.u||(t.Y=1,Mt(t.Ga,t),t.A=0)}function $n(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=oe(w(t.Ga,t),er(t,t.A)),t.A++,0))}function Xn(t){null!=t.B&&(f.clearTimeout(t.B),t.B=null)}function Jn(t){t.g=new me(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ve(t.oa);je(e,"RID","rpc"),je(e,"SID",t.J),je(e,"CI",t.N?"0":"1"),je(e,"AID",t.U),Yn(t,e),je(e,"TYPE","xmlhttp"),t.o&&t.s&&Vn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ze(Ve(e)),n.s=null,n.U=!0,Ie(n,t)}function Zn(t){null!=t.v&&(f.clearTimeout(t.v),t.v=null)}function tr(t,e){var n=null;if(t.g==e){Zn(t),Xn(t),t.g=null;var r=2}else{if(!hn(t.i,e))return;n=e.D,dn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;xt(r=Zt(),new ie(r,n,e,i)),Kn(t)}else Qn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ln(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=oe(w(t.Ha,t,e),er(t,t.C)),t.C++,0)))}(t,e)||2==r&&$n(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:nr(t,5);break;case 4:nr(t,10);break;case 3:nr(t,6);break;default:nr(t,2)}}function er(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function nr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=w(t.jb,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||He(n,"https"),ze(n)),function(t,e){var n=new Qt;if(f.Image){var r=new Image;r.onload=E(yn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(yn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(yn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(yn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else re(2);t.G=0,t.j&&t.j.va(e),rr(t),jn(t)}function rr(t){t.G=0,t.I=-1,t.j&&(0==pn(t.i).length&&0==t.l.length||(t.i.i.length=0,C(t.l),t.l.length=0),t.j.ua())}function ir(t,e,n){var r=function(t){return t instanceof Fe?Ve(t):new Fe(t,void 0)}(n);if(""!=r.i)e&&Ue(r,e+"."+r.i),qe(r,r.m);else{var i=f.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&He(i,t),e&&Ue(i,e),n&&qe(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&M(t.aa,(function(t,e){je(r,e,t)})),e=t.D,n=t.sa,e&&n&&je(r,e,n),je(r,"VER",t.ma),Yn(t,r),r}function or(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new _n(new bn({ib:!0})):new _n(t.qa)).L=t.H,e}function ar(){}function sr(){if(z&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function ur(t,e){_t.call(this),this.g=new Un(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new hr(this)}function cr(t){de.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function lr(){pe.call(this),this.status=1}function hr(t){this.g=t}(c=_n.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():he.g(),this.C=this.u?ce(this.u):ce(he),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void kn(this,t)}t=n||"";var i=new Oe(this.headers);r&&Re(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Dn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=f.FormData&&t instanceof f.FormData,!(0<=A(Nn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pn(this),0<this.B&&((this.K=function(t){return z&&et()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=Bt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){kn(this,t)}},c.pa=function(){void 0!==h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))},c.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,xt(this,"complete"),xt(this,"abort"),Ln(this))},c.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ln(this,!0)),_n.Z.M.call(this)},c.Fa=function(){this.s||(this.F||this.v||this.l?On(this):this.cb())},c.cb=function(){On(this)},c.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(t){return-1}},c.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},c.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),An(e)}},c.Da=function(){return this.m},c.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=Un.prototype).ma=8,c.G=1,c.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},c.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new me(this,this.h,t,void 0),n=this.s;if(this.P&&(n?H(n=F(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Gn(this,e,r),je(i=Ve(this.F),"RID",t),je(i,"CVER",22),this.D&&je(i,"X-HTTP-Session-Id",this.D),Yn(this,i),this.o&&n&&Vn(i,this.o,n),fn(this.i,e),this.Ra&&je(i,"TYPE","init"),this.ja?(je(i,"$req",r),je(i,"SID","null"),e.$=!0,Ee(e,i,null)):Ee(e,i,r),this.G=2}}else 3==this.G&&(t?Wn(this,t):0==this.l.length||cn(this.i)||Wn(this))},c.Ga=function(){if(this.u=null,Jn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=oe(w(this.bb,this),t)}},c.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,re(10),Bn(this),Jn(this))},c.ab=function(){null!=this.v&&(this.v=null,Bn(this),$n(this),re(19))},c.jb=function(t){t?(this.h.info("Successfully pinged google.com"),re(2)):(this.h.info("Failed to ping google.com"),re(1))},(c=ar.prototype).xa=function(){},c.wa=function(){},c.va=function(){},c.ua=function(){},c.Oa=function(){},sr.prototype.g=function(t,e){return new ur(t,e)},I(ur,_t),ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Mt(w(t.hb,t,e))),re(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ir(t,null,t.W),Kn(t)},ur.prototype.close=function(){qn(this.g)},ur.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,zn(this.g,e)}else this.v?((e={}).__data__=Nt(t),zn(this.g,e)):zn(this.g,t)},ur.prototype.M=function(){this.g.j=null,delete this.j,qn(this.g),delete this.g,ur.Z.M.call(this)},I(cr,de),I(lr,pe),I(hr,ar),hr.prototype.xa=function(){xt(this.g,"a")},hr.prototype.wa=function(t){xt(this.g,new cr(t))},hr.prototype.va=function(t){xt(this.g,new lr(t))},hr.prototype.ua=function(){xt(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,se.COMPLETE="complete",le.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",_t.prototype.listen=_t.prototype.N,_n.prototype.listenOnce=_n.prototype.O,_n.prototype.getLastError=_n.prototype.La,_n.prototype.getLastErrorCode=_n.prototype.Da,_n.prototype.getStatus=_n.prototype.ba,_n.prototype.getResponseJson=_n.prototype.Qa,_n.prototype.getResponseText=_n.prototype.ga,_n.prototype.send=_n.prototype.ea;var fr=ae,dr=se,pr=Xt,vr=10,mr=11,gr=bn,yr=le,br=_n,wr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();wr.o=-1;var Er={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ir=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,i.C6)(e,t),e}(Error),Tr=new a.Vy("@firebase/firestore");function Sr(){return Tr.logLevel}function Ar(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=a.$b.DEBUG){var r=e.map(Cr);Tr.debug.apply(Tr,(0,i.fX)(["Firestore (8.10.1): "+t],r))}}function _r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=a.$b.ERROR){var r=e.map(Cr);Tr.error.apply(Tr,(0,i.fX)(["Firestore (8.10.1): "+t],r))}}function xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=a.$b.WARN){var r=e.map(Cr);Tr.warn.apply(Tr,(0,i.fX)(["Firestore (8.10.1): "+t],r))}}function Cr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Nr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw _r(e),new Error(e)}function Dr(t,e){t||Nr()}function kr(t,e){return t}function Rr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Or=function(){function t(){}return t.u=function(){for(var t=62*Math.floor(256/62),e="";e.length<20;)for(var n=Rr(40),r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return e},t}();function Lr(t,e){return t<e?-1:t>e?1:0}function Pr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Mr(t){return t+"\0"}var Fr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ir(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ir(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ir(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ir(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Lr(this.nanoseconds,t.nanoseconds):Lr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Vr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Fr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Hr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Br=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Nr(),void 0===n?n=t.length-e:n>t.length-e&&Nr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Ir(Er.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Br),zr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return zr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ir(Er.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ir(Er.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ir(Er.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ir(Er.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Br),Wr=function(){function t(t){this.fields=t,t.sort(Kr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Pr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Yr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Lr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Yr.EMPTY_BYTE_STRING=new Yr("");var Gr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(Dr(!!t),"string"==typeof t){var e=0,n=Gr.exec(t);if(Dr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$r(t.seconds),nanos:$r(t.nanos)}}function $r(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xr(t){return"string"==typeof t?Yr.fromBase64String(t):Yr.fromUint8Array(t)}function Jr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zr(t){var e=t.mapValue.fields.__previous_value__;return Jr(e)?Zr(e):e}function ti(t){var e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}function ei(t){return null==t}function ni(t){return 0===t&&1/t==-1/0}function ri(t){return"number"==typeof t&&Number.isInteger(t)&&!ni(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ii=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(jr.fromString(e))},t.fromName=function(e){return new t(jr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return jr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new jr(e.slice()))},t}();function oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jr(t)?4:10:Nr()}function ai(t,e){var n=oi(t);if(n!==oi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ti(t).isEqual(ti(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Qr(t.timestampValue),r=Qr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xr(t.bytesValue).isEqual(Xr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $r(t.geoPointValue.latitude)===$r(e.geoPointValue.latitude)&&$r(t.geoPointValue.longitude)===$r(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $r(t.integerValue)===$r(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=$r(t.doubleValue),r=$r(e.doubleValue);return n===r?ni(n)===ni(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Pr(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Hr(n)!==Hr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ai(n[i],r[i])))return!1;return!0}(t,e);default:return Nr()}}function si(t,e){return void 0!==(t.values||[]).find((function(t){return ai(t,e)}))}function ui(t,e){var n=oi(t),r=oi(e);if(n!==r)return Lr(n,r);switch(n){case 0:return 0;case 1:return Lr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=$r(t.integerValue||t.doubleValue),r=$r(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ci(t.timestampValue,e.timestampValue);case 4:return ci(ti(t),ti(e));case 5:return Lr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Xr(t),r=Xr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lr(n[i],r[i]);if(0!==o)return o}return Lr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Lr($r(t.latitude),$r(e.latitude));return 0!==n?n:Lr($r(t.longitude),$r(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ui(n[i],r[i]);if(o)return o}return Lr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Lr(r[a],o[a]);if(0!==s)return s;var u=ui(n[r[a]],i[o[a]]);if(0!==u)return u}return Lr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Nr()}}function ci(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lr(t,e);var n=Qr(t),r=Qr(e),i=Lr(n.seconds,r.seconds);return 0!==i?i:Lr(n.nanos,r.nanos)}function li(t){return hi(t)}function hi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Qr(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ii.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=hi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+hi(t.fields[o])}return e+"}"}(t.mapValue):Nr();var e,n}function fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function di(t){return!!t&&"integerValue"in t}function pi(t){return!!t&&"arrayValue"in t}function vi(t){return!!t&&"nullValue"in t}function mi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gi(t){return!!t&&"mapValue"in t}function yi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=yi(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=yi(t.arrayValue.values[r]);return n}return Object.assign({},t)}var bi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!gi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yi(e)},t.prototype.setAll=function(t){var e=this,n=Kr.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=yi(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());gi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return ai(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];gi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Ur(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(yi(this.value))},t}();function wi(t){var e=[];return Ur(t.fields,(function(t,n){var r=new Kr([t]);if(gi(n)){var i=wi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Wr(e)}var Ei=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Vr.min(),bi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,bi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,bi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=bi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=bi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ii=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ti(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ii(t,e,n,r,i,o,a)}function Si(t){var e=kr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+li(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ei(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fi(e.startAt)),e.endAt&&(n+="|ub:",n+=Fi(e.endAt)),e.h=n}return e.h}function Ai(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ai(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qi(t.startAt,e.startAt)&&qi(t.endAt,e.endAt)}function _i(t){return ii.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var xi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,i.C6)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ci(t,n,r):"array-contains"===n?new Ri(t,r):"in"===n?new Oi(t,r):"not-in"===n?new Li(t,r):"array-contains-any"===n?new Pi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ni(t,n):new Di(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ui(e,this.value)):null!==e&&oi(this.value)===oi(e)&&this.m(ui(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ci=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ii.fromName(r.referenceValue),i}return(0,i.C6)(e,t),e.prototype.matches=function(t){var e=ii.comparator(t.key,this.key);return this.m(e)},e}(xi),Ni=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ki(0,n),r}return(0,i.C6)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xi),Di=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ki(0,n),r}return(0,i.C6)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xi);function ki(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ii.fromName(t.referenceValue)}))}var Ri=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,i.C6)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return pi(e)&&si(e.arrayValue,this.value)},e}(xi),Oi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,i.C6)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&si(this.value.arrayValue,e)},e}(xi),Li=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,i.C6)(e,t),e.prototype.matches=function(t){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!si(this.value.arrayValue,e)},e}(xi),Pi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,i.C6)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!pi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return si(e.value.arrayValue,t)}))},e}(xi),Mi=function(t,e){this.position=t,this.before=e};function Fi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return li(t)})).join(",")}var Vi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ui(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ii.comparator(ii.fromName(a.referenceValue),n.key):ui(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}var Bi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ji(t,e,n,r,i,o,a,s){return new Bi(t,e,n,r,i,o,a,s)}function zi(t){return new Bi(t)}function Ki(t){return!ei(t.limit)&&"F"===t.limitType}function Wi(t){return!ei(t.limit)&&"L"===t.limitType}function Yi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Gi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qi(t){return null!==t.collectionGroup}function $i(t){var e=kr(t);if(null===e.p){e.p=[];var n=Gi(e),r=Yi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Vi(n)),e.p.push(new Vi(Kr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Vi(Kr.keyField(),u))}}}return e.p}function Xi(t){var e=kr(t);if(!e.T)if("F"===e.limitType)e.T=Ti(e.path,e.collectionGroup,$i(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=$i(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Vi(o.field,a))}var s=e.endAt?new Mi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Mi(e.startAt.position,!e.startAt.before):null;e.T=Ti(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Ji(t,e,n){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zi(t,e){return Ai(Xi(t),Xi(e))&&t.limitType===e.limitType}function to(t){return Si(Xi(t))+"|lt:"+t.limitType}function eo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+li(e.value);var e})).join(", ")+"]"),ei(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fi(t.startAt)),t.endAt&&(e+=", endAt: "+Fi(t.endAt)),"Target("+e+")"}(Xi(t))+"; limitType="+t.limitType+")"}function no(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ii.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ui(t.startAt,$i(t),e)||t.endAt&&Ui(t.endAt,$i(t),e))}(t,e)}function ro(t){return function(e,n){for(var r=!1,i=0,o=$i(t);i<o.length;i++){var a=o[i],s=io(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function io(t,e,n){var r=t.field.isKeyField()?ii.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ui(r,i):Nr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Nr()}}function oo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ni(e)?"-0":e}}function ao(t){return{integerValue:""+t}}function so(t,e){return ri(e)?ao(e):oo(t,e)}var uo=function(){this._=void 0};function co(t,e,n){return t instanceof fo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof po?vo(t,e):t instanceof mo?go(t,e):function(t,e){var n=ho(t,e),r=bo(n)+bo(t.A);return di(n)&&di(t.A)?ao(r):oo(t.R,r)}(t,e)}function lo(t,e,n){return t instanceof po?vo(t,e):t instanceof mo?go(t,e):n}function ho(t,e){return t instanceof yo?di(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e}(uo),po=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.C6)(e,t),e}(uo);function vo(t,e){for(var n=wo(e),r=function(t){n.some((function(e){return ai(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.C6)(e,t),e}(uo);function go(t,e){for(var n=wo(e),r=function(t){n=n.filter((function(e){return!ai(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,i.C6)(e,t),e}(uo);function bo(t){return $r(t.integerValue||t.doubleValue)}function wo(t){return pi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Eo=function(t,e){this.field=t,this.transform=e},Io=function(t,e){this.version=t,this.transformResults=e},To=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function So(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ao=function(){};function _o(t,e,n){t instanceof ko?function(t,e,n){var r=t.value.clone(),i=Lo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ro?function(t,e,n){if(So(t.precondition,e)){var r=Lo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function xo(t,e,n){t instanceof ko?function(t,e,n){if(So(t.precondition,e)){var r=t.value.clone(),i=Po(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Do(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ro?function(t,e,n){if(So(t.precondition,e)){var r=Po(t.fieldTransforms,n,e),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(Do(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){So(t.precondition,e)&&e.convertToNoDocument(Vr.min())}(t,e)}function Co(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=ho(o.transform,a||null);null!=s&&(null==n&&(n=bi.empty()),n.set(o.field,s))}return n||null}function No(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Pr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof po&&e instanceof po||t instanceof mo&&e instanceof mo?Pr(t.elements,e.elements,ai):t instanceof yo&&e instanceof yo?ai(t.A,e.A):t instanceof fo&&e instanceof fo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Do(t){return t.isFoundDocument()?t.version:Vr.min()}var ko=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,i.C6)(e,t),e}(Ao),Ro=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,i.C6)(e,t),e}(Ao);function Oo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Lo(t,e,n){var r=new Map;Dr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,lo(a,s,n[i]))}return r}function Po(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,co(s,u,e))}return r}var Mo,Fo,Vo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,i.C6)(e,t),e}(Ao),Ho=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,i.C6)(e,t),e}(Ao),Uo=function(t){this.count=t};function qo(t){switch(t){case Er.OK:return Nr();case Er.CANCELLED:case Er.UNKNOWN:case Er.DEADLINE_EXCEEDED:case Er.RESOURCE_EXHAUSTED:case Er.INTERNAL:case Er.UNAVAILABLE:case Er.UNAUTHENTICATED:return!1;case Er.INVALID_ARGUMENT:case Er.NOT_FOUND:case Er.ALREADY_EXISTS:case Er.PERMISSION_DENIED:case Er.FAILED_PRECONDITION:case Er.ABORTED:case Er.OUT_OF_RANGE:case Er.UNIMPLEMENTED:case Er.DATA_LOSS:return!0;default:return Nr()}}function Bo(t){if(void 0===t)return _r("GRPC error has no .code"),Er.UNKNOWN;switch(t){case Mo.OK:return Er.OK;case Mo.CANCELLED:return Er.CANCELLED;case Mo.UNKNOWN:return Er.UNKNOWN;case Mo.DEADLINE_EXCEEDED:return Er.DEADLINE_EXCEEDED;case Mo.RESOURCE_EXHAUSTED:return Er.RESOURCE_EXHAUSTED;case Mo.INTERNAL:return Er.INTERNAL;case Mo.UNAVAILABLE:return Er.UNAVAILABLE;case Mo.UNAUTHENTICATED:return Er.UNAUTHENTICATED;case Mo.INVALID_ARGUMENT:return Er.INVALID_ARGUMENT;case Mo.NOT_FOUND:return Er.NOT_FOUND;case Mo.ALREADY_EXISTS:return Er.ALREADY_EXISTS;case Mo.PERMISSION_DENIED:return Er.PERMISSION_DENIED;case Mo.FAILED_PRECONDITION:return Er.FAILED_PRECONDITION;case Mo.ABORTED:return Er.ABORTED;case Mo.OUT_OF_RANGE:return Er.OUT_OF_RANGE;case Mo.UNIMPLEMENTED:return Er.UNIMPLEMENTED;case Mo.DATA_LOSS:return Er.DATA_LOSS;default:return Nr()}}(Fo=Mo||(Mo={}))[Fo.OK=0]="OK",Fo[Fo.CANCELLED=1]="CANCELLED",Fo[Fo.UNKNOWN=2]="UNKNOWN",Fo[Fo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fo[Fo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fo[Fo.NOT_FOUND=5]="NOT_FOUND",Fo[Fo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fo[Fo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fo[Fo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fo[Fo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fo[Fo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fo[Fo.ABORTED=10]="ABORTED",Fo[Fo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fo[Fo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fo[Fo.INTERNAL=13]="INTERNAL",Fo[Fo.UNAVAILABLE=14]="UNAVAILABLE",Fo[Fo.DATA_LOSS=15]="DATA_LOSS";var jo=function(){function t(t,e){this.comparator=t,this.root=e||Ko.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new zo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new zo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new zo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new zo(this.root,t,this.comparator,!0)},t}(),zo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ko=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Nr();if(this.right.isRed())throw Nr();var t=this.left.check();if(t!==this.right.check())throw Nr();return t+(this.isRed()?0:1)},t}();Ko.EMPTY=null,Ko.RED=!0,Ko.BLACK=!1,Ko.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ko(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Wo=function(){function t(t){this.comparator=t,this.data=new jo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Yo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Yo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Yo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Go=new jo(ii.comparator);function Qo(){return Go}var $o=new jo(ii.comparator);function Xo(){return $o}var Jo=new jo(ii.comparator);function Zo(){return Jo}var ta=new Wo(ii.comparator);function ea(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ta,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var na=new Wo(Lr);function ra(){return na}var ia=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Vr.min(),r,ra(),Qo(),ea())},t}(),oa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Yr.EMPTY_BYTE_STRING,n,ea(),ea(),ea())},t}(),aa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},sa=function(t,e){this.targetId=t,this.V=e},ua=function(t,e,n,r){void 0===n&&(n=Yr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ca=function(){function t(){this.S=0,this.D=fa(),this.C=Yr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ea(),e=ea(),n=ea();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Nr()}})),new oa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=fa()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),la=function(){function t(t){this.W=t,this.G=new Map,this.H=Qo(),this.J=ha(),this.Y=new Wo(Lr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Nr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(_i(i))if(0===n){var o=new ii(i.path);this.tt(e,o,Ei.newNoDocument(o,Vr.min()))}else Dr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&_i(o.target)){var a=new ii(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Ei.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ea();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ia(t,n,this.Y,this.H,r);return this.H=Qo(),this.J=ha(),this.Y=new Wo(Lr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ca,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Wo(Lr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ar("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ca),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ha(){return new jo(ii.comparator)}function fa(){return new jo(ii.comparator)}var da={asc:"ASCENDING",desc:"DESCENDING"},pa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},va=function(t,e){this.databaseId=t,this.I=e};function ma(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ga(t,e){return t.I?e.toBase64():e.toUint8Array()}function ya(t,e){return ma(t,e.toTimestamp())}function ba(t){return Dr(!!t),Vr.fromTimestamp(function(t){var e=Qr(t);return new Fr(e.seconds,e.nanos)}(t))}function wa(t,e){return function(t){return new jr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ea(t){var e=jr.fromString(t);return Dr(Ka(e)),e}function Ia(t,e){return wa(t.databaseId,e.path)}function Ta(t,e){var n=Ea(e);if(n.get(1)!==t.databaseId.projectId)throw new Ir(Er.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ir(Er.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ii(xa(n))}function Sa(t,e){return wa(t.databaseId,e)}function Aa(t){var e=Ea(t);return 4===e.length?jr.emptyPath():xa(e)}function _a(t){return new jr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xa(t){return Dr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ca(t,e,n){return{name:Ia(t,e),fields:n.value.mapValue.fields}}function Na(t,e,n){var r=Ta(t,e.name),i=ba(e.updateTime),o=new bi({mapValue:{fields:e.fields}}),a=Ei.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Da(t,e){var n;if(e instanceof ko)n={update:Ca(t,e.key,e.value)};else if(e instanceof Vo)n={delete:Ia(t,e.key)};else if(e instanceof Ro)n={update:Ca(t,e.key,e.data),updateMask:za(e.fieldMask)};else{if(!(e instanceof Ho))return Nr();n={verify:Ia(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof fo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof po)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Nr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ya(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Nr()}(t,e.precondition)),n}function ka(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?To.updateTime(ba(t.updateTime)):void 0!==t.exists?To.exists(t.exists):To.none()}(e.currentDocument):To.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Dr("REQUEST_TIME"===e.setToServerValue),n=new fo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new po(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new mo(i)}else"increment"in e?n=new yo(t,e.increment):Nr();var o=Kr.fromServerFormat(e.fieldPath);return new Eo(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ta(t,e.update.name),o=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Wr(e.map((function(t){return Kr.fromServerFormat(t)})))}(e.updateMask);return new Ro(i,o,a,n,r)}return new ko(i,o,n,r)}if(e.delete){var s=Ta(t,e.delete);return new Vo(s,n)}if(e.verify){var u=Ta(t,e.verify);return new Ho(u,n)}return Nr()}function Ra(t,e){return{documents:[Sa(t,e.path)]}}function Oa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(mi(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NAN"}};if(vi(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(mi(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NAN"}};if(vi(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(t.field),op:Ha(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ua(t.field),direction:Va(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||ei(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Ma(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ma(e.endAt)),n}function La(t){var e=Aa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Pa(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Vi(qa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ei(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Fa(n.startAt));var l=null;return n.endAt&&(l=Fa(n.endAt)),ji(e,i,s,a,u,"F",c,l)}function Pa(t){return t?void 0!==t.unaryFilter?[ja(t)]:void 0!==t.fieldFilter?[Ba(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Pa(t)})).reduce((function(t,e){return t.concat(e)})):Nr():[]}function Ma(t){return{before:t.before,values:t.position}}function Fa(t){var e=!!t.before,n=t.values||[];return new Mi(n,e)}function Va(t){return da[t]}function Ha(t){return pa[t]}function Ua(t){return{fieldPath:t.canonicalString()}}function qa(t){return Kr.fromServerFormat(t.fieldPath)}function Ba(t){return xi.create(qa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nr()}}(t.fieldFilter.op),t.fieldFilter.value)}function ja(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qa(t.unaryFilter.field);return xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qa(t.unaryFilter.field);return xi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qa(t.unaryFilter.field);return xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qa(t.unaryFilter.field);return xi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nr()}}function za(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ka(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Wa(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ga(e)),e=Ya(t.get(n),e);return Ga(e)}function Ya(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Ga(t){return t+""}function Qa(t){var e=t.length;if(Dr(e>=2),2===e)return Dr(""===t.charAt(0)&&""===t.charAt(1)),jr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Nr(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Nr()}o=a+2}return new jr(r)}var $a=function(t,e){this.seconds=t,this.nanoseconds=e},Xa=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Xa.store="owner",Xa.key="owner";var Ja=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ja.store="mutationQueues",Ja.keyPath="userId";var Za=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Za.store="mutations",Za.keyPath="batchId",Za.userMutationsIndex="userMutationsIndex",Za.userMutationsKeyPath=["userId","batchId"];var ts=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Wa(e)]},t.key=function(t,e,n){return[t,Wa(e),n]},t}();ts.store="documentMutations",ts.PLACEHOLDER=new ts;var es=function(t,e){this.path=t,this.readTime=e},ns=function(t,e){this.path=t,this.version=e},rs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};rs.store="remoteDocuments",rs.readTimeIndex="readTimeIndex",rs.readTimeIndexPath="readTime",rs.collectionReadTimeIndex="collectionReadTimeIndex",rs.collectionReadTimeIndexPath=["parentPath","readTime"];var is=function(t){this.byteSize=t};is.store="remoteDocumentGlobal",is.key="remoteDocumentGlobalKey";var os=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};os.store="targets",os.keyPath="targetId",os.queryTargetsIndexName="queryTargetsIndex",os.queryTargetsKeyPath=["canonicalId","targetId"];var as=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};as.store="targetDocuments",as.keyPath=["targetId","path"],as.documentTargetsIndex="documentTargetsIndex",as.documentTargetsKeyPath=["path","targetId"];var ss=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ss.key="targetGlobalKey",ss.store="targetGlobal";var us=function(t,e){this.collectionId=t,this.parent=e};us.store="collectionParents",us.keyPath=["collectionId","parent"];var cs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};cs.store="clientMetadata",cs.keyPath="clientId";var ls=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ls.store="bundles",ls.keyPath="bundleId";var hs=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};hs.store="namedQueries",hs.keyPath="name";var fs=(0,i.fX)((0,i.fX)([],(0,i.fX)((0,i.fX)([],(0,i.fX)((0,i.fX)([],(0,i.fX)((0,i.fX)([],[Ja.store,Za.store,ts.store,rs.store,os.store,Xa.store,ss.store,as.store]),[cs.store])),[is.store])),[us.store])),[ls.store,hs.store]),ds="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ps=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),vs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ms=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Nr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),gs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new vs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ws(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=As(e.target.error);n.ft.reject(new ws(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ws(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ar("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Is(e)},t}(),ys=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,o.ZQ)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ar("SimpleDb","Removing database:",t),Ts(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,o.ZQ)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n=this;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ar("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ws(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ir(Er.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ws(t,n))},i.onupgradeneeded=function(t){Ar("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ar("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.YH)(this,(function(l){switch(l.label){case 0:o="readonly"===e,a=0,s=function(){var e,s,c,l,h;return(0,i.YH)(this,(function(i){switch(i.label){case 0:++a,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=i.sent(),e=gs.open(u.db,t,o?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ms.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(i.sent(),s),c)];case 4:return l=i.sent(),h="FirebaseError"!==l.name&&a<3,Ar("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),bs=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ts(this.Pt.delete())},t}(),ws=function(t){function e(e,n){var r=this;return(r=t.call(this,Er.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,i.C6)(e,t),e}(Ir);function Es(t){return"IndexedDbTransactionError"===t.name}var Is=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ar("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ar("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ts(n)},t.prototype.add=function(t){return Ar("SimpleDb","ADD",this.store.name,t,t),Ts(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ts(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ar("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ar("SimpleDb","DELETE",this.store.name,t),Ts(this.store.delete(t))},t.prototype.count=function(){return Ar("SimpleDb","COUNT",this.store.name),Ts(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Ar("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ms((function(n,r){e.onerror=function(t){var e=As(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ms((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new bs(i),a=e(i.primaryKey,i.value,o);if(a instanceof ms){var s=a.catch((function(t){return o.done(),ms.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ms.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ts(t){return new ms((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=As(t.target.error);n(e)}}))}var Ss=!1;function As(t){var e=ys._t((0,o.ZQ)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ir("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ss||(Ss=!0,setTimeout((function(){throw r}),0)),r}}return t}var _s=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,i.C6)(e,t),e}(ps);function xs(t,e){var n=kr(t);return ys.It(n.Mt,e)}var Cs=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&_o(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&xo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&xo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ea())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Pr(this.mutations,t.mutations,(function(t,e){return No(t,e)}))&&Pr(this.baseMutations,t.baseMutations,(function(t,e){return No(t,e)}))},t}(),Ns=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Dr(e.mutations.length===r.length);for(var i=Zo(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ds=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Vr.min()),void 0===o&&(o=Vr.min()),void 0===a&&(a=Yr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ks=function(t){this.Lt=t};function Rs(t,e){if(e.document)return Na(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ii.fromSegments(e.noDocument.path),r=Fs(e.noDocument.readTime),i=Ei.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ii.fromSegments(e.unknownDocument.path);return r=Fs(e.unknownDocument.version),Ei.newUnknownDocument(o,r)}return Nr()}function Os(t,e,n){var r=Ls(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ia(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ma(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new rs(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Ms(e.version);return a=e.hasCommittedMutations,new rs(null,new es(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ms(e.version);return new rs(new ns(c,l),null,null,!0,r,i)}return Nr()}function Ls(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ps(t){var e=new Fr(t[0],t[1]);return Vr.fromTimestamp(e)}function Ms(t){var e=t.toTimestamp();return new $a(e.seconds,e.nanoseconds)}function Fs(t){var e=new Fr(t.seconds,t.nanoseconds);return Vr.fromTimestamp(e)}function Vs(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ka(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return ka(t.Lt,e)})),s=Fr.fromMillis(e.localWriteTimeMs);return new Cs(e.batchId,s,n,a)}function Hs(t){var e,n,r=Fs(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Fs(t.lastLimboFreeSnapshotVersion):Vr.min();return void 0!==t.query.documents?(Dr(1===(n=t.query).documents.length),e=Xi(zi(Aa(n.documents[0])))):e=function(t){return Xi(La(t))}(t.query),new Ds(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yr.fromBase64String(t.resumeToken))}function Us(t,e){var n,r=Ms(e.snapshotVersion),i=Ms(e.lastLimboFreeSnapshotVersion);n=_i(e.target)?Ra(t.Lt,e.target):Oa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new os(e.targetId,Si(e.target),r,o,e.sequenceNumber,i,n)}function qs(t){var e=La({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ji(e,e.limit,"L"):e}var Bs=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return js(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Fs(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return js(t).put({bundleId:(n=e).id,createTime:Ms(ba(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return zs(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qs(e.bundledQuery),readTime:Fs(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return zs(t).put(function(t){return{name:t.name,readTime:Ms(ba(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function js(t){return xs(t,ls.store)}function zs(t){return xs(t,hs.store)}var Ks=function(){function t(){this.Bt=new Ws}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ms.resolve()},t.prototype.getCollectionParents=function(t,e){return ms.resolve(this.Bt.getEntries(e))},t}(),Ws=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wo(jr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Wo(jr.comparator)).toArray()},t}(),Ys=function(){function t(){this.qt=new Ws}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Wa(i)};return Gs(t).put(o)}return ms.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Mr(e),""],!1,!0);return Gs(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Qa(o.parent))}return n}))},t}();function Gs(t){return xs(t,us.store)}var Qs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$s=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Xs(t,e,n){var r=t.store(Za.store),i=t.store(ts.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Dr(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ts.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ms.waitFor(o).next((function(){return c}))}function Js(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Nr();e=t.noDocument}return JSON.stringify(e).length}$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(41943040,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);var Zs=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Dr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eu(t).$t({index:Za.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=nu(t),a=eu(t);return a.add({}).next((function(s){Dr("number"==typeof s);for(var u=new Cs(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Da(t.Lt,e)})),i=n.mutations.map((function(e){return Da(t.Lt,e)}));return new Za(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Wo((function(t,e){return Lr(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=ts.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,ts.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),ms.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return eu(t).get(e).next((function(t){return t?(Dr(t.userId===n.userId),Vs(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?ms.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return eu(t).$t({index:Za.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Dr(e.batchId>=r),o=Vs(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eu(t).$t({index:Za.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eu(t).Nt(Za.userMutationsIndex,n).next((function(t){return t.map((function(t){return Vs(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ts.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nu(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Qa(u);if(s===n.userId&&e.path.isEqual(l))return eu(t).get(c).next((function(t){if(!t)throw Nr();Dr(t.userId===n.userId),o.push(Vs(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wo(Lr),i=[];return e.forEach((function(e){var o=ts.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=nu(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Qa(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ms.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ts.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Wo(Lr);return nu(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Qa(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(eu(t).get(e).next((function(t){if(null===t)throw Nr();Dr(t.userId===n.userId),r.push(Vs(n.R,t))})))})),ms.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Xs(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ms.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ms.resolve();var r=IDBKeyRange.lowerBound(ts.prefixForUser(e.userId)),i=[];return nu(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Qa(t[1]);i.push(o)}else r.done()})).next((function(){Dr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return tu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ru(t).get(this.userId).next((function(t){return t||new Ja(e.userId,-1,"")}))},t}();function tu(t,e,n){var r=ts.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return nu(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function eu(t){return xs(t,Za.store)}function nu(t){return xs(t,ts.store)}function ru(t){return xs(t,Ja.store)}var iu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),ou=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new iu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Vr.fromTimestamp(new Fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return au(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Dr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return au(t).$t((function(a,s){var u=Hs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return ms.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return au(t).$t((function(t,n){var r=Hs(n);e(r)}))},t.prototype.Xt=function(t){return su(t).get(ss.key).next((function(t){return Dr(null!==t),t}))},t.prototype.Zt=function(t,e){return su(t).put(ss.key,e)},t.prototype.te=function(t,e){return au(t).put(Us(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Si(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return au(t).$t({range:r,index:os.queryTargetsIndexName},(function(t,n,r){var o=Hs(n);Ai(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=uu(t);return e.forEach((function(e){var a=Wa(e.path);i.push(o.put(new as(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),ms.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=uu(t);return ms.forEach(e,(function(e){var o=Wa(e.path);return ms.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=uu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=uu(t),i=ea();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Qa(t[1]),o=new ii(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Wa(e.path),r=IDBKeyRange.bound([n],[Mr(n)],!1,!0),i=0;return uu(t).$t({index:as.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return au(t).get(e).next((function(t){return t?Hs(t):null}))},t}();function au(t){return xs(t,os.store)}function su(t){return xs(t,ss.store)}function uu(t){return xs(t,as.store)}function cu(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){if(t.code!==Er.FAILED_PRECONDITION||t.message!==ds)throw t;return Ar("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function lu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Lr(n,i);return 0===a?Lr(r,o):a}var hu=function(){function t(t){this.ne=t,this.buffer=new Wo(lu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();lu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),fu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ar("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,i.sH)(e,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Es(e=n.sent())?(Ar("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,cu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),du=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ms.resolve(wr.o);var r=new hu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector","Garbage collection skipped; disabled"),ms.resolve(Qs)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ar("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Qs):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(Ar("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),Sr()<=a.$b.DEBUG&&Ar("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),ms.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),pu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new du(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return vu(t,n)},t.prototype.removeReference=function(t,e,n){return vu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return vu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ru(t).Ot((function(r){return tu(t,r,e).next((function(t){return t&&(n=!0),ms.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),uu(t).delete([0,Wa(a.path)])}))}));i.push(u)}})).next((function(){return ms.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return vu(t,e)},t.prototype.we=function(t,e){var n,r=uu(t),i=wr.o;return r.$t({index:as.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==wr.o&&e(new ii(Qa(n)),i),i=s,n=a):i=wr.o})).next((function(){i!==wr.o&&e(new ii(Qa(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function vu(t,e){return uu(t).put(function(t,e){return new as(0,Wa(t.path),e)}(e,t.currentSequenceNumber))}var mu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ur(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return qr(this.inner)},t}(),gu=function(){function t(){this.changes=new mu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Vr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ei.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ms.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),yu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Eu(t).put(Iu(e),n)},t.prototype.removeEntry=function(t,e){var n=Eu(t),r=Iu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Eu(t).get(Iu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Eu(t).get(Iu(e)).next((function(t){return{document:n.ye(e,t),size:Js(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Qo();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Qo(),i=new jo(ii.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Js(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ms.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Eu(t).$t({range:r},(function(t,e,r){for(var a=ii.fromSegments(t);o&&ii.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Qo(),o=e.path.length+1,a={};if(n.isEqual(Vr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Ls(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=rs.collectionReadTimeIndex}return Eu(t).$t(a,(function(t,n,a){if(t.length===o){var s=Rs(r.R,n);e.path.isPrefixOf(s.key.path)?no(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new bu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return wu(t).get(is.key).next((function(t){return Dr(!!t),t}))},t.prototype.me=function(t,e){return wu(t).put(is.key,e)},t.prototype.ye=function(t,e){if(e){var n=Rs(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Vr.min()))return n}return Ei.newInvalidDocument(t)},t}(),bu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new mu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,i.C6)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Wo((function(t,e){return Lr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Os(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Js(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Os(e.Ie.R,Ei.newNoDocument(o,Vr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ms.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(gu);function wu(t){return xs(t,is.store)}function Eu(t){return xs(t,rs.store)}function Iu(t){return t.path.toArray()}var Tu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Dr(n<r&&n>=0&&r<=11);var o=new gs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Xa.store)}(t),function(t){t.createObjectStore(Ja.store,{keyPath:Ja.keyPath}),t.createObjectStore(Za.store,{keyPath:Za.keyPath,autoIncrement:!0}).createIndex(Za.userMutationsIndex,Za.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ts.store)}(t),Su(t),function(t){t.createObjectStore(rs.store)}(t));var a=ms.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(as.store),t.deleteObjectStore(os.store),t.deleteObjectStore(ss.store)}(t),Su(t)),a=a.next((function(){return function(t){var e=t.store(ss.store),n=new ss(0,0,Vr.min().toTimestamp(),0);return e.put(ss.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Za.store).Nt().next((function(n){t.deleteObjectStore(Za.store),t.createObjectStore(Za.store,{keyPath:Za.keyPath,autoIncrement:!0}).createIndex(Za.userMutationsIndex,Za.userMutationsKeyPath,{unique:!0});var r=e.store(Za.store),i=n.map((function(t){return r.put(t)}));return ms.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(cs.store,{keyPath:cs.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(is.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(rs.store);e.createIndex(rs.readTimeIndex,rs.readTimeIndexPath,{unique:!1}),e.createIndex(rs.collectionReadTimeIndex,rs.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(ls.store,{keyPath:ls.keyPath})}(t),function(t){t.createObjectStore(hs.store,{keyPath:hs.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(rs.store).$t((function(t,n){e+=Js(n)})).next((function(){var n=new is(e);return t.store(is.store).put(is.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ja.store),r=t.store(Za.store);return n.Nt().next((function(n){return ms.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Za.userMutationsIndex,i).next((function(r){return ms.forEach(r,(function(r){Dr(r.userId===n.userId);var i=Vs(e.R,r);return Xs(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(as.store),n=t.store(rs.store);return t.store(ss.store).get(ss.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new jr(n),a=function(t){return[0,Wa(t)]}(o);r.push(e.get(a).next((function(n){return n?ms.resolve():function(n){return e.put(new as(0,Wa(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ms.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(us.store,{keyPath:us.keyPath});var n=e.store(us.store),r=new Ws,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Wa(i)})}};return e.store(rs.store).$t({Ft:!0},(function(t,e){var n=new jr(t);return i(n.popLast())})).next((function(){return e.store(ts.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Qa(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(os.store);return n.$t((function(t,r){var i=Hs(r),o=Us(e.R,i);return n.put(o)}))},t}();function Su(t){t.createObjectStore(as.store,{keyPath:as.keyPath}).createIndex(as.documentTargetsIndex,as.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(os.store,{keyPath:os.keyPath}).createIndex(os.queryTargetsIndexName,os.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ss.store)}var Au="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_u=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ir(Er.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pu(this,i),this.Le=n+"main",this.R=new ks(u),this.Be=new ys(this.Le,11,new Tu(this.R)),this.qe=new ou(this.referenceDelegate,this.R),this.Ut=new Ys,this.Ue=function(t,e){return new yu(t,e)}(this.R,this.Ut),this.Ke=new Bs,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ir(Er.FAILED_PRECONDITION,Au);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new wr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,i.sH)(e,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,i.sH)(e,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,i.sH)(e,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Cu(e).put(new cs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Es(e))return Ar("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ar("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return xu(t).get(Xa.key).next((function(t){return ms.resolve(e.tn(t))}))},t.prototype.en=function(t){return Cu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e,n,r,o=this;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=xs(t,cs.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ms.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ms.resolve(!0):xu(t).get(Xa.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ir(Er.FAILED_PRECONDITION,Au);return!1}}return!(!e.networkEnabled||!e.inForeground)||Cu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ar("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t=this;return(0,i.YH)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Xa.store,cs.store],(function(e){var n=new _s(e,wr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Cu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Zs.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ar("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,fs,(function(o){return i=new _s(o,r.Ne?r.Ne.next():wr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw _r("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ir(Er.FAILED_PRECONDITION,ds);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return xu(t).get(Xa.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ir(Er.FAILED_PRECONDITION,Au)}))},t.prototype.Ze=function(t){var e=new Xa(this.clientId,this.allowTabSynchronization,Date.now());return xu(t).put(Xa.key,e)},t.yt=function(){return ys.yt()},t.prototype.Xe=function(t){var e=this,n=xu(t);return n.get(Xa.key).next((function(t){return e.tn(t)?(Ar("IndexedDbPersistence","Releasing primary lease."),n.delete(Xa.key)):ms.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(_r("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,o.nr)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ar("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return _r("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){_r("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function xu(t){return xs(t,Xa.store)}function Cu(t){return xs(t,cs.store)}function Nu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Du=function(t,e){this.progress=t,this.wn=e},ku=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ii.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Qi(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ii(e)).next((function(t){var e=Xo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Xo();return this.Ut.getCollectionParents(t,i).next((function(a){return ms.forEach(a,(function(a){var s=function(t,e){return new Bi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Ei.newInvalidDocument(c),r=r.insert(c,l)),xo(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){no(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ea(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ro&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ru=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ea(),i=ea(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ou=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Vr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Ki(e)||Wi(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Sr()<=a.$b.DEBUG&&Ar("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),eo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Wo(ro(t));return e.forEach((function(e,r){no(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Sr()<=a.$b.DEBUG&&Ar("QueryEngine","Using full collection scan to execute query:",eo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Vr.min())},t}(),Lu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new jo(Lr),this.Fn=new mu((function(t){return Si(t)}),Ai),this.$n=Vr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ku(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Pu(t,e,n,r){return new Lu(t,e,n,r)}function Mu(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=kr(t),r=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n._n.getAllMutationBatches(t).next((function(a){return i=a,r=n.persistence.getMutationQueue(e),o=new ku(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=ea(),s=0,u=i;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return o.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return a=i.sent(),[2,(n._n=r,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Fu(t,e){var n=kr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=ms.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Dr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Vu(t){var e=kr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Hu(t,e){var n=kr(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Dr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Qo();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Uu(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Vr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return ms.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Uu(t,e,n,r,i){var o=ea();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Qo();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Vr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Ar("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function qu(t,e){var n=kr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Bu(t,e){var n=kr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ms.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ds(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function ju(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:r=kr(t),o=r.kn.get(e),a=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(t){return r.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!Es(s=i.sent()))throw s;return Ar("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(o.target),[2]}}))}))}function zu(t,e,n){var r=kr(t),i=Vr.min(),o=ea();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=kr(t),i=r.Fn.get(n);return void 0!==i?ms.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Xi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Vr.min(),n?o:ea())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ku(t,e){var n=kr(t),r=kr(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Wu(t){var e=kr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=kr(t),i=Qo(),o=Ls(n),a=Eu(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:rs.readTimeIndex,range:s},(function(t,e){var n=Rs(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Ps(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Yu(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){return[2,(e=kr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Eu(t),n=Vr.min();return e.$t({index:rs.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ps(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Gu(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d,p;return(0,i.YH)(this,(function(i){switch(i.label){case 0:for(o=kr(t),a=ea(),s=Qo(),u=Zo(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(a=a.add(f)),s=s.insert(f,e.Un(h)),u=u.insert(f,e.Kn(h.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Bu(o,function(t){return Xi(zi(jr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=i.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Uu(t,d,s,Vr.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return o.qe.addMatchingKeys(t,a,p.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Qu(t,e,n){return void 0===n&&(n=ea()),(0,i.sH)(this,void 0,void 0,(function(){var r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,Bu(t,Xi(qs(e.bundledQuery)))];case 1:return r=i.sent(),[2,(o=kr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var i=ba(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return o.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Yr.EMPTY_BYTE_STRING,i);return o.kn=o.kn.insert(a.targetId,a),o.qe.updateTargetData(t,a).next((function(){return o.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var $u=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ms.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ba(n.createTime)}),ms.resolve()},t.prototype.getNamedQuery=function(t,e){return ms.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:qs(t.bundledQuery),readTime:ba(t.readTime)}}(e)),ms.resolve()},t}(),Xu=function(){function t(){this.Wn=new Wo(Ju.Gn),this.zn=new Wo(Ju.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ju(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Ju(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ii(new jr([])),r=new Ju(n,t),i=new Ju(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ii(new jr([])),n=new Ju(e,t),r=new Ju(e,t+1),i=ea();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Ju(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ju=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ii.comparator(t.key,e.key)||Lr(t.ns,e.ns)},t.Hn=function(t,e){return Lr(t.ns,e.ns)||ii.comparator(t.key,e.key)},t}(),Zu=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Wo(Ju.Gn)}return t.prototype.checkEmpty=function(t){return ms.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Cs(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ju(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ms.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ms.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ms.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ms.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ms.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ju(e,0),i=new Ju(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ms.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wo(Lr);return e.forEach((function(t){var e=new Ju(t,0),i=new Ju(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ms.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ii.isDocumentKey(i)||(i=i.child(""));var o=new Ju(new ii(i),0),a=new Wo(Lr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),ms.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Dr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ms.forEach(e.mutations,(function(i){var o=new Ju(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ju(e,0),r=this.rs.firstAfterOrEqual(n);return ms.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ms.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),tc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new jo(ii.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ms.resolve(n?n.document.clone():Ei.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Qo();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ei.newInvalidDocument(t))})),ms.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Qo(),i=new ii(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||no(e,c)&&(r=r.insert(c.key,c.clone()))}return ms.resolve(r)},t.prototype.fs=function(t,e){return ms.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ec(this)},t.prototype.getSize=function(t){return ms.resolve(this.size)},t}(),ec=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,i.C6)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ms.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(gu),nc=function(){function t(t){this.persistence=t,this.ds=new mu((function(t){return Si(t)}),Ai),this.lastRemoteSnapshotVersion=Vr.min(),this.highestTargetId=0,this.ws=0,this._s=new Xu,this.targetCount=0,this.ys=iu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ms.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ms.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ms.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ms.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ms.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new iu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ms.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ms.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ms.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),ms.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ms.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ms.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ms.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ms.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ms.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ms.resolve(n)},t.prototype.containsKey=function(t,e){return ms.resolve(this._s.containsKey(e))},t}(),rc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new wr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new nc(this),this.Ut=new Ks,this.Ue=function(t,e){return new tc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new ks(e),this.Ke=new $u(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Zu(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ar("MemoryPersistence","Starting transaction:",t);var i=new ic(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ms.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ic=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,i.C6)(e,t),e}(ps),oc=function(){function t(t){this.persistence=t,this.As=new Xu,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ms.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ms.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ms.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ms.forEach(this.vs,(function(r){var i=ii.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ms.or([function(){return ms.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),ac=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function sc(t,e){return"firestore_clients_"+t+"_"+e}function uc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function cc(t,e){return"firestore_targets_"+t+"_"+e}ac.UNAUTHENTICATED=new ac(null),ac.GOOGLE_CREDENTIALS=new ac("google-credentials-uid"),ac.FIRST_PARTY=new ac("first-party-uid"),ac.MOCK_USER=new ac("mock-user");var lc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ir(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(_r("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),hc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ir(i.error.code,i.error.message)),o?new t(e,i.state,r):(_r("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ra(),a=0;i&&a<r.activeTargetIds.length;++a)i=ri(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(_r("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),dc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(_r("SharedClientState","Failed to parse online state: "+e),null)},t}(),pc=function(){function t(){this.activeTargetIds=ra()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),vc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new jo(Lr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=sc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new pc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,u,c,l,h,f=this;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(o=this.getItem(sc(this.persistenceKey,r)))&&(a=fc.Vs(r,o))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(cc(this.persistenceKey,t));if(n){var r=hc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(cc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ar("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ar("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ar("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ar("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,i.sH)(e,void 0,void 0,(function(){var t,e,r,o,a,s;return(0,i.YH)(this,(function(i){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(s=function(t){var e=wr.o;if(null!=t)try{var n=JSON.parse(t);Dr("number"==typeof n),e=n}catch(t){_r("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==wr.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new lc(this.currentUser,t,e,n),i=uc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=uc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=cc(this.persistenceKey,t),i=new hc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return fc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lc.Vs(new ac(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return hc.Vs(r,e)},t.prototype.js=function(t){return dc.Vs(t)},t.prototype.ii=function(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ar("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ra();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),mc=function(){function t(){this.li=new pc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new pc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),gc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),yc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ar("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ar("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),bc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ec=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,i.C6)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new br;a.listenOnce(dr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case fr.NO_ERROR:var e=a.getResponseJson();Ar("Connection","XHR received:",JSON.stringify(e)),i(e);break;case fr.TIMEOUT:Ar("Connection",'RPC "'+t+'" timed out'),o(new Ir(Er.DEADLINE_EXCEEDED,"Request time out"));break;case fr.HTTP_ERROR:var n=a.getStatus();if(Ar("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Er).indexOf(e)>=0?e:Er.UNKNOWN}(r.status);o(new Ir(s,r.message))}else o(new Ir(Er.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ir(Er.UNAVAILABLE,"Connection failed."));break;default:Nr()}}finally{Ar("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new sr,i=Zt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new gr({})),this.ki(a.initMessageHeaders,e),(0,o.jZ)()||(0,o.lV)()||(0,o.b8)()||(0,o.lT)()||(0,o.n4)()||(0,o.sr)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Ar("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,l=!1,h=new wc({Ei:function(t){l?Ar("Connection","Not sending because WebChannel is closed:",t):(c||(Ar("Connection","Opening WebChannel transport."),u.open(),c=!0),Ar("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,yr.EventType.OPEN,(function(){l||Ar("Connection","WebChannel transport opened.")})),f(u,yr.EventType.CLOSE,(function(){l||(l=!0,Ar("Connection","WebChannel transport closed"),h.Vi())})),f(u,yr.EventType.ERROR,(function(t){l||(l=!0,xr("Connection","WebChannel transport errored:",t),h.Vi(new Ir(Er.UNAVAILABLE,"The operation could not be completed")))})),f(u,yr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Dr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ar("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Mo[t];if(void 0!==e)return Bo(e)}(o),s=i.message;void 0===a&&(a=Er.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new Ir(a,s)),u.close()}else Ar("Connection","WebChannel received:",n),h.Si(n)}})),f(i,pr.STAT_EVENT,(function(t){t.stat===vr?Ar("Connection","Detected buffering proxy"):t.stat===mr&&Ar("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ar("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Ar("RestConnection","Received: ",t),t}),(function(e){throw xr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=bc[t];return this.Di+"/v1/"+e+":"+n},t}());function Ic(){return"undefined"!=typeof window?window:null}function Tc(){return"undefined"!=typeof document?document:null}function Sc(t){return new va(t,!0)}var Ac=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ar("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),_c=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ac(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Er.RESOURCE_EXHAUSTED?(_r(e.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Er.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ir(Er.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,i.sH)(t,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ar("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ar("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),xc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,i.C6)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Nr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Dr(void 0===e||"string"==typeof e),Yr.fromBase64String(e||"")):(Dr(void 0===e||e instanceof Uint8Array),Yr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Er.UNKNOWN:Bo(t.code);return new Ir(e,t.message||"")}(s);n=new ua(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ta(t,r.document.name),o=ba(r.document.updateTime);var s=new bi({mapValue:{fields:r.document.fields}}),u=(a=Ei.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new aa(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ta(t,r.document),o=r.readTime?ba(r.readTime):Vr.min(),s=Ei.newNoDocument(i,o),a=r.removedTargetIds||[],n=new aa([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ta(t,r.document),o=r.removedTargetIds||[],n=new aa([],o,i,null);else{if(!("filter"in e))return Nr();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Uo(r),o=l.targetId,n=new sa(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Vr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Vr.min():e.readTime?ba(e.readTime):Vr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=_a(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=_i(r)?{documents:Ra(t,r)}:{query:Oa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ga(t,e.resumeToken):e.snapshotVersion.compareTo(Vr.min())>0&&(n.readTime=ma(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=_a(this.R),e.removeTarget=t,this.cr(e)},e}(_c),Cc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,i.C6)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Dr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Dr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ba(t.updateTime):ba(e);return n.isEqual(Vr.min())&&(n=ba(e)),new Io(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ba(t.commitTime);return this.listener.Tr(n,e)}return Dr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=_a(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Da(e.R,t)}))};this.cr(n)},e}(_c),Nc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,i.C6)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ir(Er.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Er.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ir(Er.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Er.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ir(Er.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Dc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(_r(e),this.Vr=!1):Ar("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),kc=function(t,e,n,r,o){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,i.sH)(a,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return Uc(this)?(Ar("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return(e=kr(t)).Or.add(4),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Rc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Dc(n,r)};function Rc(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:if(!Uc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Oc(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lc(t,e){var n=kr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Hc(n)?Vc(n):el(n).er()&&Mc(n,e))}function Pc(t,e){var n=kr(t),r=el(n);n.$r.delete(e),r.er()&&Fc(n,e),0===n.$r.size&&(r.er()?r.ir():Uc(n)&&n.Br.set("Unknown"))}function Mc(t,e){t.qr.U(e.targetId),el(t).mr(e)}function Fc(t,e){t.qr.U(e),el(t).yr(e)}function Vc(t){t.qr=new la({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),el(t).start(),t.Br.Sr()}function Hc(t){return Uc(t)&&!el(t).tr()&&t.$r.size>0}function Uc(t){return 0===kr(t).Or.size}function qc(t){t.qr=void 0}function Bc(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){return t.$r.forEach((function(e,n){Mc(t,e)})),[2]}))}))}function jc(t,e){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(n){return qc(t),Hc(t)?(t.Br.Nr(e),Vc(t)):t.Br.set("Unknown"),[2]}))}))}function zc(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a;return(0,i.YH)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ua&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.YH)(this,(function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?(a=o[r],t.$r.has(a)?[4,t.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:i.sent(),t.$r.delete(a),t.qr.removeTarget(a),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ar("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Kc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof aa?t.qr.X(e):e instanceof sa?t.qr.rt(e):t.qr.et(e),n.isEqual(Vr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Vu(t.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Yr.EMPTY_BYTE_STRING,n.snapshotVersion)),Fc(t,e);var r=new Ds(n.target,e,1,n.sequenceNumber);Mc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ar("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Kc(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Kc(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r=this;return(0,i.YH)(this,(function(o){switch(o.label){case 0:if(!Es(e))throw e;return t.Or.add(1),[4,Oc(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Vu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,i.sH)(r,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return Ar("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Rc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Wc(t,e){return e().catch((function(n){return Kc(t,n,e)}))}function Yc(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n,r,o,a;return(0,i.YH)(this,(function(i){switch(i.label){case 0:e=kr(t),n=nl(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return Uc(t)&&t.Fr.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,qu(e.localStore,r)];case 3:return null===(o=i.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=o.batchId,function(t,e){t.Fr.push(e);var n=nl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return a=i.sent(),[4,Kc(e,a)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return Gc(e)&&Qc(e),[2]}}))}))}function Gc(t){return Uc(t)&&!nl(t).tr()&&t.Fr.length>0}function Qc(t){nl(t).start()}function $c(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){return nl(t).Ar(),[2]}))}))}function Xc(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.YH)(this,(function(i){for(e=nl(t),n=0,r=t.Fr;n<r.length;n++)o=r[n],e.Er(o.mutations);return[2]}))}))}function Jc(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return r=t.Fr.shift(),o=Ns.from(r,e,n),[4,Wc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return i.sent(),[4,Yc(t)];case 2:return i.sent(),[2]}}))}))}function Zc(t,e){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e&&nl(t).pr?[4,function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return qo(r=e.code)&&r!==Er.ABORTED?(n=t.Fr.shift(),nl(t).sr(),[4,Wc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Yc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gc(t)&&Qc(t),[2]}}))}))}function tl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return n=kr(t),e?(n.Or.delete(2),[4,Rc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Oc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function el(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=kr(t);return r.br(),new xc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Bc.bind(null,t),Ri:jc.bind(null,t),_r:zc.bind(null,t)}),t.Mr.push((function(n){return(0,i.sH)(e,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Hc(t)?Vc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),qc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function nl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=kr(t);return r.br(),new Cc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:$c.bind(null,t),Ri:Zc.bind(null,t),Ir:Xc.bind(null,t),Tr:Jc.bind(null,t)}),t.Mr.push((function(n){return(0,i.sH)(e,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Yc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Ar("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var rl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ir(Er.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function il(t,e){if(_r("AsyncQueue",e+": "+t),Es(t))return new Ir(Er.UNAVAILABLE,e+": "+t);throw t}var ol=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ii.comparator(e.key,n.key)}:function(t,e){return ii.comparator(t.key,e.key)},this.keyedMap=Xo(),this.sortedSet=new jo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),al=function(){function t(){this.Qr=new jo(ii.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Nr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),sl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ol.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ul=function(){this.Wr=void 0,this.listeners=[]},cl=function(){this.queries=new mu((function(t){return to(t)}),Zi),this.onlineState="Unknown",this.Gr=new Set};function ll(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.YH)(this,(function(i){switch(i.label){case 0:if(n=kr(t),r=e.query,o=!1,(a=n.queries.get(r))||(o=!0,a=new ul),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),s=a,[4,n.onListen(r)];case 2:return s.Wr=i.sent(),[3,4];case 3:return u=i.sent(),c=il(u,"Initialization of query '"+eo(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,a),a.listeners.push(e),e.zr(n.onlineState),a.Wr&&e.Hr(a.Wr)&&pl(n),[2]}}))}))}function hl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.YH)(this,(function(i){return n=kr(t),r=e.query,o=!1,(a=n.queries.get(r))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function fl(t,e){for(var n=kr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&pl(n)}function dl(t,e,n){var r=kr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function pl(t){t.Gr.forEach((function(t){t.next()}))}var vl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=sl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ml=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),gl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ta(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Na(this.R,t.document,!1):Ei.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return ba(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new gl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||ea()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e,n,r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,Gu(this.localStore,new gl(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(o=r[n],[4,Qu(this.localStore,o,e.get(o.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Du(Object.assign({},this.progress),t))]}}))}))}}();var yl=function(t){this.key=t},bl=function(t){this.key=t},wl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ea(),this.mutatedKeys=ea(),this.lo=ro(t),this.fo=new ol(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new al,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Ki(this.query)&&i.size===this.query.limit?i.last():null,c=Wi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=no(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Ki(this.query)||Wi(this.query))for(;a.size>this.query.limit;){var l=Ki(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new sl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new al,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ea(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new bl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new yl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ea();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return sl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),El=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Il=function(t){this.key=t,this.bo=!1},Tl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new mu((function(t){return to(t)}),Zi),this.Vo=new Map,this.So=new Set,this.Do=new jo(ii.comparator),this.Co=new Map,this.No=new Xu,this.xo={},this.ko=new Map,this.Fo=iu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Sl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=Zl(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,Bu(n.localStore,Xi(e))];case 2:return s=i.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Al(n,e,r,"current"===u)];case 3:o=i.sent(),n.isPrimaryClient&&Lc(n.remoteStore,s),i.label=4;case 4:return[2,o]}}))}))}function Al(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a,s,u,c,l;return(0,i.YH)(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a,s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return(o=e.view._o(n)).Nn?[4,zu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return a=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(o,t.isPrimaryClient,a),[2,(Vl(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,zu(t.localStore,e,!0)];case 1:return o=h.sent(),a=new wl(e,o.Bn),s=a._o(o.documents),u=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),Vl(t,n,c.To),l=new El(e,n,a),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function _l(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=kr(t),r=n.Po.get(e),(o=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,o.filter((function(t){return!Zi(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,ju(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Pc(n.remoteStore,r.targetId),Ml(n,r.targetId)})).catch(cu)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return Ml(n,r.targetId),[4,ju(n.localStore,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function xl(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:r=th(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=kr(t),i=Fr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ea());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Co(c,n.get(c.key));null!=l&&a.push(new Ro(c.key,l,wi(l.value.mapValue),To.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return o=i.sent(),r.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new jo(Lr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,o.batchId,n),[4,ql(r,o.changes)];case 3:return i.sent(),[4,Yc(r.remoteStore)];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),s=il(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Cl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:n=kr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Dr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Dr(r.bo):t.removedDocuments.size>0&&(Dr(r.bo),r.bo=!1))})),[4,ql(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Nl(t,e,n){var r=kr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=kr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&pl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Dl(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s,u,c;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return(r=kr(t)).sharedClientState.updateQueryState(e,"rejected",n),o=r.Co.get(e),(a=o&&o.key)?(s=(s=new jo(ii.comparator)).insert(a,Ei.newNoDocument(a,Vr.min())),u=ea().add(a),c=new ia(Vr.min(),new Map,new Wo(Lr),s,u),[4,Cl(r,c)]):[3,2];case 1:return i.sent(),r.Do=r.Do.remove(a),r.Co.delete(e),Ul(r),[3,4];case 2:return[4,ju(r.localStore,e,!1).then((function(){return Ml(r,e,n)})).catch(cu)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}function kl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:n=kr(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Fu(n.localStore,e)];case 2:return o=i.sent(),Pl(n,r,null),Ll(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ql(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Rl(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:r=kr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=kr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Dr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return o=i.sent(),Pl(r,e,n),Ll(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ql(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ol(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:Uc((n=kr(t)).remoteStore)||Ar("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=kr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.ko.get(r)||[]).push(e),n.ko.set(r,o),[3,4]);case 3:return a=i.sent(),s=il(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Ll(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Pl(t,e,n){var r=kr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ml(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Fl(t,e)}))}function Fl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Pc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ul(t))}function Vl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof yl?(t.No.addReference(o.key,e),Hl(t,o)):o instanceof bl?(Ar("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Fl(t,o.key)):Nr()}}function Hl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ar("SyncEngine","New document in limbo: "+n),t.So.add(r),Ul(t))}function Ul(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ii(jr.fromString(e)),r=t.Fo.next();t.Co.set(r,new Il(n)),t.Do=t.Do.insert(n,r),Lc(t.remoteStore,new Ds(Xi(zi(n.path)),r,2,wr.o))}}function ql(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.YH)(this,(function(u){switch(u.label){case 0:return r=kr(t),o=[],a=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,i){s.push(r.Oo(i,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Ru.Pn(i.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(o),[4,function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h;return(0,i.YH)(this,(function(i){switch(i.label){case 0:n=kr(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ms.forEach(e,(function(e){return ms.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ms.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!Es(r=i.sent()))throw r;return Ar("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,a=e;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.kn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(u,h));return[2]}}))}))}(r.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Bl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return(n=kr(t)).currentUser.isEqual(e)?[3,3]:(Ar("SyncEngine","User change. New user:",e.toKey()),[4,Mu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Ir(Er.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ql(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function jl(t,e){var n=kr(t),r=n.Co.get(e);if(r&&r.bo)return ea().add(r.key);var i=ea(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function zl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,zu((n=kr(t)).localStore,e.query,!0)];case 1:return r=i.sent(),o=e.view.Ao(r),[2,(n.isPrimaryClient&&Vl(n,e.targetId,o.To),o)]}}))}))}function Kl(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){return[2,Wu((e=kr(t)).localStore).then((function(t){return ql(e,t)}))]}))}))}function Wl(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,function(t,e){var n=kr(t),r=kr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ms.resolve(null)}))}))}((o=kr(t)).localStore,e)];case 1:return null===(a=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yc(o.remoteStore)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Pl(o,e,r||null),Ll(o,e),function(t,e){kr(kr(t)._n).Gt(e)}(o.localStore,e)):Nr(),i.label=4;case 4:return[4,ql(o,a)];case 5:return i.sent(),[3,7];case 6:Ar("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function Yl(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return Zl(n=kr(t)),th(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Gl(n,r.toArray())]);case 1:return o=i.sent(),n.$o=!0,[4,tl(n.remoteStore,!0)];case 2:for(i.sent(),a=0,s=o;a<s.length;a++)u=s[a],Lc(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Ml(n,e),ju(n.localStore,e,!0)})),Pc(n.remoteStore,e)})),[4,l]);case 4:return i.sent(),[4,Gl(n,c)];case 5:return i.sent(),function(t){var e=kr(t);e.Co.forEach((function(t,n){Pc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new jo(ii.comparator)}(n),n.$o=!1,[4,tl(n.remoteStore,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function Gl(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h,f,d,p,v,m;return(0,i.YH)(this,(function(i){switch(i.label){case 0:n=kr(t),r=[],o=[],a=0,s=e,i.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Bu(n.localStore,Xi(l[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,f=l,i.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,zl(n,p)]):[3,6];case 4:(v=i.sent()).snapshot&&o.push(v.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ku(n.localStore,u)];case 8:return m=i.sent(),[4,Bu(n.localStore,m)];case 9:return c=i.sent(),[4,Al(n,Ql(m),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),r)]}}))}))}function Ql(t){return ji(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $l(t){var e=kr(t);return kr(kr(e.localStore).persistence).fn()}function Xl(t,e,n,r){return(0,i.sH)(this,void 0,void 0,(function(){var o,a,s;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return(o=kr(t)).$o?(Ar("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Wu(o.localStore)];case 3:return a=i.sent(),s=ia.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ql(o,a,s)];case 4:return i.sent(),[3,8];case 5:return[4,ju(o.localStore,e,!0)];case 6:return i.sent(),Ml(o,e,r),[3,8];case 7:Nr(),i.label=8;case 8:return[2]}}))}))}function Jl(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l,h,f,d;return(0,i.YH)(this,(function(p){switch(p.label){case 0:if(!(r=Zl(t)).$o)return[3,10];o=0,a=e,p.label=1;case 1:return o<a.length?(s=a[o],r.Vo.has(s)?(Ar("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ku(r.localStore,s)]):[3,6];case 2:return u=p.sent(),[4,Bu(r.localStore,u)];case 3:return c=p.sent(),[4,Al(r,Ql(u),c.targetId,!1)];case 4:p.sent(),Lc(r.remoteStore,c),p.label=5;case 5:return o++,[3,1];case 6:l=function(t){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,ju(r.localStore,t,!1).then((function(){Pc(r.remoteStore,t),Ml(r,t)})).catch(cu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(d=f[h],[5,l(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Zl(t){var e=kr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dl.bind(null,e),e.vo._r=fl.bind(null,e.eventManager),e.vo.Mo=dl.bind(null,e.eventManager),e}function th(t){var e=kr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rl.bind(null,e),e}var eh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return this.R=Sc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Pu(this.persistence,new Ou,t.initialUser,this.R)},t.prototype.qo=function(t){return new rc(oc.bs,this.R)},t.prototype.Bo=function(t){return new mc},t.prototype.terminate=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),nh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,i.C6)(e,t),e.prototype.initialize=function(e){return(0,i.sH)(this,void 0,void 0,(function(){var n=this;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Yu(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,th(this.Qo.syncEngine)];case 4:return r.sent(),[4,Yc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Pu(this.persistence,new Ou,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new fu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Nu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?$s.withCacheSize(this.cacheSizeBytes):$s.DEFAULT;return new _u(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ic(),Tc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new mc},e}(eh),rh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,i.C6)(e,t),e.prototype.initialize=function(e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r=this;return(0,i.YH)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof vc?(this.sharedClientState.syncEngine={ui:Wl.bind(null,n),ai:Xl.bind(null,n),hi:Jl.bind(null,n),fn:$l.bind(null,n),ci:Kl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return(0,i.sH)(r,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return[4,Yl(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Ic();if(!vc.yt(e))throw new Ir(Er.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Nu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new vc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(nh),ih=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n=this;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Nl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Bl.bind(null,this.syncEngine),[4,tl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new cl},t.prototype.createDatastore=function(t){var e,n=Sc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Ec(e));return function(t,e,n){return new Nc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Nl(a.syncEngine,t,0)},o=yc.yt()?new yc:new gc,new kc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Tl(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e=kr(t),Ar("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Oc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),oh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ah=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new vs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e,n,r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ml(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n=this;return(0,i.YH)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ir(Er.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=kr(t),r=_a(n.R)+"/documents",o={documents:e.map((function(t){return Ia(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,o)];case 1:return a=i.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Dr(!!e.found),e.found.name,e.found.updateTime;var n=Ta(t,e.found.name),r=ba(e.found.updateTime),i=new bi({mapValue:{fields:e.found.fields}});return Ei.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Dr(!!e.missing),Dr(!!e.readTime);var n=Ta(t,e.missing),r=ba(e.readTime);return Ei.newNoDocument(n,r)}(t,e):Nr()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Dr(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Vo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e=this;return(0,i.YH)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ii.fromPath(n);e.mutations.push(new Ho(r,e.precondition(r)))})),[4,function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=kr(t),r=_a(n.R)+"/documents",o={writes:e.map((function(t){return Da(n.R,t)}))},[4,n.Ni("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Nr();e=Vr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ir(Er.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?To.updateTime(e):To.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Vr.min()))throw new Ir(Er.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return To.updateTime(e)}return To.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),sh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ac(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,i.sH)(t,void 0,void 0,(function(){var t,e,n=this;return(0,i.YH)(this,(function(r){return t=new ah(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ei(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qo(e)}return!1},t}(),uh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=ac.UNAUTHENTICATED,this.clientId=Or.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,i.sH)(r,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return Ar("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ir(Er.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.sH)(t,void 0,void 0,(function(){var t,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=il(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ch(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r,o=this;return(0,i.YH)(this,(function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ar("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,i.sH)(o,void 0,void 0,(function(){return(0,i.YH)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Mu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function lh(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r;return(0,i.YH)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,hh(t)];case 1:return n=o.sent(),Ar("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,i.sH)(this,void 0,void 0,(function(){var n,r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return(n=kr(t)).asyncQueue.verifyOperationInProgress(),Ar("RemoteStore","RemoteStore received new credentials"),r=Uc(n),n.Or.add(3),[4,Oc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Rc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function hh(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ar("FirestoreClient","Using default OfflineComponentProvider"),[4,ch(t,new eh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function fh(t){return(0,i.sH)(this,void 0,void 0,(function(){return(0,i.YH)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ar("FirestoreClient","Using default OnlineComponentProvider"),[4,lh(t,new ih)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function dh(t){return hh(t).then((function(t){return t.persistence}))}function ph(t){return hh(t).then((function(t){return t.localStore}))}function vh(t){return fh(t).then((function(t){return t.remoteStore}))}function mh(t){return fh(t).then((function(t){return t.syncEngine}))}function gh(t){return(0,i.sH)(this,void 0,void 0,(function(){var e,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return[4,fh(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Sl.bind(null,e.syncEngine),n.onUnlisten=_l.bind(null,e.syncEngine),n)]}}))}))}function yh(t,e,n){var r=this;void 0===n&&(n={});var o=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(r,void 0,void 0,(function(){var r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new oh({next:function(o){e.enqueueAndForget((function(){return hl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Ir(Er.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Ir(Er.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new vl(zi(n.path),o,{includeMetadataChanges:!0,so:!0});return ll(t,a)},[4,gh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function bh(t,e,n){var r=this;void 0===n&&(n={});var o=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(r,void 0,void 0,(function(){var r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new oh({next:function(n){e.enqueueAndForget((function(){return hl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Ir(Er.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new vl(n,o,{includeMetadataChanges:!0,so:!0});return ll(t,a)},[4,gh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var wh=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Eh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ih=new Map,Th=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Sh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(ac.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ah=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_h=function(){function t(t){var e=this;this.currentUser=ac.UNAUTHENTICATED,this.oc=new vs,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ar("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ar("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ar("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Dr("string"==typeof n.accessToken),new Th(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,i.sH)(n,void 0,void 0,(function(){return(0,i.YH)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Dr(null===t||"string"==typeof t),new ac(t)},t}(),xh=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=ac.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Ch=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new xh(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(ac.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Nh(t,e,n){if(!n)throw new Ir(Er.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Dh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ir(Er.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function kh(t,e,n,r){if(!0===e&&!0===r)throw new Ir(Er.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Rh(t){if(!ii.isDocumentKey(t))throw new Ir(Er.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Oh(t){if(ii.isDocumentKey(t))throw new Ir(Er.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Lh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Nr()}function Ph(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ir(Er.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Lh(t);throw new Ir(Er.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Mh(t,e){if(e<=0)throw new Ir(Er.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Fh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ir(Er.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ir(Er.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Vh=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fh({}),this._settingsFrozen=!1,t instanceof Eh?(this._databaseId=t,this._credentials=new Sh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ir(Er.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(t.options.projectId)}(t),this._credentials=new _h(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ir(Er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ir(Er.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Sh;switch(t.type){case"gapi":var e=t.client;return Dr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ch(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ir(Er.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Ih.get(this))&&(Ar("ComponentProvider","Removing Datastore"),Ih.delete(this),t.terminate()),Promise.resolve();var t},t}(),Hh=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qh(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Uh=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,zi(r))||this)._path=r,i.type="collection",i}return(0,i.C6)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Hh(this.firestore,null,new ii(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Uh);function Bh(t,e){for(var n,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(t=(0,o.Ku)(t),Nh("collection","path",e),t instanceof Vh)return Oh(n=jr.fromString.apply(jr,(0,i.fX)([e],r))),new qh(t,null,n);if(!(t instanceof Hh||t instanceof qh))throw new Ir(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Oh(n=jr.fromString.apply(jr,(0,i.fX)([t.path],r)).child(jr.fromString(e))),new qh(t.firestore,null,n)}function jh(t,e){for(var n,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(t=(0,o.Ku)(t),1===arguments.length&&(e=Or.u()),Nh("doc","path",e),t instanceof Vh)return Rh(n=jr.fromString.apply(jr,(0,i.fX)([e],r))),new Hh(t,null,new ii(n));if(!(t instanceof Hh||t instanceof qh))throw new Ir(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Rh(n=t._path.child(jr.fromString.apply(jr,(0,i.fX)([e],r)))),new Hh(t.firestore,t instanceof qh?t.converter:null,new ii(n))}function zh(t,e){return t=(0,o.Ku)(t),e=(0,o.Ku)(e),(t instanceof Hh||t instanceof qh)&&(e instanceof Hh||e instanceof qh)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Kh(t,e){return t=(0,o.Ku)(t),e=(0,o.Ku)(e),t instanceof Uh&&e instanceof Uh&&t.firestore===e.firestore&&Zi(t._query,e._query)&&t.converter===e.converter}var Wh=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ac(this,"async_queue_retry"),this.Ic=function(){var e=Tc();e&&Ar("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Tc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Tc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new vs;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t,e=this;return(0,i.YH)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Es(t=n.sent()))throw t;return Ar("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,_r("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=rl.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Nr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,i.sH)(this,void 0,void 0,(function(){var t;return(0,i.YH)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Yh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Gh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Wh,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,i.C6)(e,t),e.prototype._terminate=function(){return this._firestoreClient||$h(this),this._firestoreClient.terminate()},e}(Vh);function Qh(t){return t._firestoreClient||$h(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $h(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new wh(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new uh(t._credentials,t._queue,r)}function Xh(t,e,n){var r=this,o=new vs;return t.asyncQueue.enqueue((function(){return(0,i.sH)(r,void 0,void 0,(function(){var r;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,ch(t,n)];case 1:return i.sent(),[4,lh(t,e)];case 2:return i.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Er.FAILED_PRECONDITION||t.code===Er.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),o.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Jh(t){if(t._initialized||t._terminated)throw new Ir(Er.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zh=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ir(Er.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),tf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Yr.fromBase64String(e))}catch(e){throw new Ir(Er.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ef=function(t){this._methodName=t},nf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ir(Er.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ir(Er.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Lr(this._lat,t._lat)||Lr(this._long,t._long)},t}(),rf=/^__.*__$/,of=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ro(t,this.data,this.fieldMask,e,this.fieldTransforms):new ko(t,this.data,e,this.fieldTransforms)},t}(),af=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ro(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function sf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nr()}}var uf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Cf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(sf(this.Nc)&&rf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),cf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Sc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new uf({Nc:t,methodName:e,qc:n,path:Kr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function lf(t){var e=t._freezeSettings(),n=Sc(t._databaseId);return new cf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Sf("Data must be an object, but it was:",a,r);var s,u,c=If(r,a);if(o.merge)s=new Wr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Af(e,f[h],n);if(!a.contains(d))throw new Ir(Er.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Nf(l,d)||l.push(d)}s=new Wr(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new of(new bi(c),s,u)}var ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ef);function df(t,e,n){return new uf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype._toFieldTransform=function(t){return new Eo(t.path,new fo)},e.prototype.isEqual=function(t){return t instanceof e},e}(ef),vf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=df(this,t,!0),n=this.Kc.map((function(t){return Ef(t,e)})),r=new po(n);return new Eo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ef),mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=df(this,t,!0),n=this.Kc.map((function(t){return Ef(t,e)})),r=new mo(n);return new Eo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ef),gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,i.C6)(e,t),e.prototype._toFieldTransform=function(t){var e=new yo(t.R,so(t.R,this.Qc));return new Eo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ef);function yf(t,e,n,r){var i=t.Uc(1,e,n);Sf("Data must be an object, but it was:",i,r);var a=[],s=bi.empty();Ur(r,(function(t,r){var u=xf(e,t,n);r=(0,o.Ku)(r);var c=i.Oc(u);if(r instanceof ff)a.push(u);else{var l=Ef(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new Wr(a);return new af(s,u,i.fieldTransforms)}function bf(t,e,n,r,i,a){var s=t.Uc(1,e,n),u=[Af(e,r,n)],c=[i];if(a.length%2!=0)throw new Ir(Er.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<a.length;l+=2)u.push(Af(e,a[l])),c.push(a[l+1]);for(var h=[],f=bi.empty(),d=u.length-1;d>=0;--d)if(!Nf(h,u[d])){var p=u[d],v=c[d];v=(0,o.Ku)(v);var m=s.Oc(p);if(v instanceof ff)h.push(p);else{var g=Ef(v,m);null!=g&&(h.push(p),f.set(p,g))}}var y=new Wr(h);return new af(f,y,s.fieldTransforms)}function wf(t,e,n,r){return void 0===r&&(r=!1),Ef(n,t.Uc(r?4:3,e))}function Ef(t,e){if(Tf(t=(0,o.Ku)(t)))return Sf("Unsupported field value:",e,t),If(t,e);if(t instanceof ef)return function(t,e){if(!sf(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Ef(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return so(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fr.fromDate(t);return{timestampValue:ma(e.R,n)}}if(t instanceof Fr)return n=new Fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ma(e.R,n)};if(t instanceof nf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tf)return{bytesValue:ga(e.R,t._byteString)};if(t instanceof Hh){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Lh(t))}(t,e)}function If(t,e){var n={};return qr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(function(t,r){var i=Ef(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Tf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fr||t instanceof nf||t instanceof tf||t instanceof Hh||t instanceof ef)}function Sf(t,e,n){if(!Tf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Lh(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Af(t,e,n){if((e=(0,o.Ku)(e))instanceof Zh)return e._internalPath;if("string"==typeof e)return xf(t,e);throw Cf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var _f=new RegExp("[~\\*/\\[\\]]");function xf(t,e,n){if(e.search(_f)>=0)throw Cf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zh.bind.apply(Zh,(0,i.fX)([void 0],e.split(".")))))._internalPath}catch(r){throw Cf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cf(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ir(Er.INVALID_ARGUMENT,(s+=". ")+t+u)}function Nf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Df=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new kf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Rf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Df);function Rf(t,e){return"string"==typeof e?xf(t,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}var Of=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Lf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,i.C6)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Rf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Df),Pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Lf),Mf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Of(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Pf(n._firestore,n._userDataWriter,r.key,r,new Of(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ir(Er.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Pf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Of(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Pf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Of(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ff(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Ff(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nr()}}function Vf(t,e){return t instanceof Lf&&e instanceof Lf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mf&&e instanceof Mf&&t._firestore===e._firestore&&Kh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Hf(t){if(Wi(t)&&0===t.explicitOrderBy.length)throw new Ir(Er.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Uf=function(){};function qf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var Bf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,i.C6)(e,t),e.prototype._apply=function(t){var e=lf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ir(Er.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Gf(r,t,h))}s={arrayValue:{values:u}}}else s=Gf(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qf(a,o),s=wf(n,"where",a,"in"===o||"not-in"===o);var f=xi.create(i,o,s);return function(t,e){if(e.g()){var n=Gi(t);if(null!==n&&!n.isEqual(e.field))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Yi(t);null!==r&&$f(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ir(Er.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ir(Er.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Uh(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Uf),jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,i.C6)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vi(e,n);return function(t,e){if(null===Yi(t)){var n=Gi(t);null!==n&&$f(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Uh(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Bi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Uf),zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,i.C6)(e,t),e.prototype._apply=function(t){return new Uh(t.firestore,t.converter,Ji(t._query,this.Hc,this.Jc))},e}(Uf),Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.C6)(e,t),e.prototype._apply=function(t){var e=Yf(t,this.type,this.Yc,this.Xc);return new Uh(t.firestore,t.converter,function(t,e){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Uf),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.C6)(e,t),e.prototype._apply=function(t){var e=Yf(t,this.type,this.Yc,this.Xc);return new Uh(t.firestore,t.converter,function(t,e){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Uf);function Yf(t,e,n,r){if(n[0]=(0,o.Ku)(n[0]),n[0]instanceof Df)return function(t,e,n,r,i){if(!r)throw new Ir(Er.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=$i(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(fi(e,r.key));else{var c=r.data.field(u.field);if(Jr(c))throw new Ir(Er.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Mi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=lf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Ir(Er.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qi(t)&&-1!==c.indexOf("/"))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(jr.fromString(c));if(!ii.isDocumentKey(l))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ii(l);s.push(fi(e,h))}else{var f=wf(n,r,c);s.push(f)}}return new Mi(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Gf(t,e,n){if("string"==typeof(n=(0,o.Ku)(n))){if(""===n)throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qi(e)&&-1!==n.indexOf("/"))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jr.fromString(n));if(!ii.isDocumentKey(r))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fi(t,new ii(r))}if(n instanceof Hh)return fi(t,n._key);throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Lh(n)+".")}function Qf(t,e){if(!Array.isArray(t)||0===t.length)throw new Ir(Er.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ir(Er.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $f(t,e,n){if(!n.isEqual(e))throw new Ir(Er.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Xf=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),oi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $r(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Nr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Ur(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new nf($r(t.latitude),$r(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Zr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ti(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Qr(t);return new Fr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=jr.fromString(t);Dr(Ka(n));var r=new Eh(n.get(1),n.get(3)),i=new ii(n.popFirst(5));return r.isEqual(e)||_r("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Jf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.C6)(e,t),e.prototype.convertBytes=function(t){return new tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hh(this.firestore,null,e)},e}(Xf),td=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=lf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ed(t,this._firestore),i=Jf(r.converter,e,n),o=hf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,To.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var a,s=ed(t,this._firestore);return a="string"==typeof(e=(0,o.Ku)(e))||e instanceof Zh?bf(this._dataReader,"WriteBatch.update",s._key,e,n,r):yf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,To.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ed(t,this._firestore);return this._mutations=this._mutations.concat(new Vo(e._key,To.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ir(Er.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ed(t,e){if((t=(0,o.Ku)(t)).firestore!==e)throw new Ir(Er.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.C6)(e,t),e.prototype.convertBytes=function(t){return new tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hh(this.firestore,null,e)},e}(Xf);function rd(t,e,n){t=Ph(t,Hh);var r=Ph(t.firestore,Gh),i=Jf(t.converter,e,n);return ad(r,[hf(lf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,To.none())])}function id(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ph(t,Hh);var a=Ph(t.firestore,Gh),s=lf(a);return ad(a,[("string"==typeof(e=(0,o.Ku)(e))||e instanceof Zh?bf(s,"updateDoc",t._key,e,n,r):yf(s,"updateDoc",t._key,e)).toMutation(t._key,To.exists(!0))])}function od(t){for(var e,n,r,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];t=(0,o.Ku)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof a[c]||Yh(a[c])||(u=a[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Yh(a[c])){var p=a[c];a[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),a[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[c+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof Hh)h=Ph(t.firestore,Gh),f=zi(t._key.path),l={next:function(e){a[c]&&a[c](sd(h,t,e))},error:a[c+1],complete:a[c+2]};else{var v=Ph(t,Uh);h=Ph(v.firestore,Gh),f=v._query;var m=new nd(h);l={next:function(t){a[c]&&a[c](new Mf(h,m,v,t))},error:a[c+1],complete:a[c+2]},Hf(t._query)}return function(t,e,n,r){var o=this,a=new oh(r),s=new vl(e,a,n);return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(o,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e=ll,[4,gh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(o,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e=hl,[4,gh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Qh(h),f,d,l)}function ad(t,e){return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var n;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return n=xl,[4,mh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Qh(t),e)}function sd(t,e,n){var r=n.docs.get(e._key),i=new nd(t);return new Lf(t,i,e._key,r,new Of(n.hasPendingWrites,n.fromCache),e.converter)}var ud=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,i.C6)(e,t),e.prototype.get=function(e){var n=this,r=ed(e,this._firestore),i=new nd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Lf(n._firestore,i,r._key,t._document,new Of(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=lf(t)}return t.prototype.get=function(t){var e=this,n=ed(t,this._firestore),r=new Zf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Nr();var i=t[0];if(i.isFoundDocument())return new Df(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Df(e._firestore,r,n._key,null,n.converter);throw Nr()}))},t.prototype.set=function(t,e,n){var r=ed(t,this._firestore),i=Jf(r.converter,e,n),o=hf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var a,s=ed(t,this._firestore);return a="string"==typeof(e=(0,o.Ku)(e))||e instanceof Zh?bf(this._dataReader,"Transaction.update",s._key,e,n,r):yf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=ed(t,this._firestore);return this._transaction.delete(e._key),this},t}());function cd(){if("undefined"==typeof Uint8Array)throw new Ir(Er.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ld(){if("undefined"==typeof atob)throw new Ir(Er.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var hd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return ld(),new t(tf.fromBase64String(e))},t.fromUint8Array=function(e){return cd(),new t(tf.fromUint8Array(e))},t.prototype.toBase64=function(){return ld(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return cd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),fd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Jh(t=Ph(t,Gh));var n=Qh(t),r=t._freezeSettings(),i=new ih;return Xh(n,i,new nh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Jh(t=Ph(t,Gh));var e=Qh(t),n=t._freezeSettings(),r=new ih;return Xh(e,r,new rh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ir(Er.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vs;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.sH)(e,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return ys.yt()?(e=t+"main",[4,ys.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Nu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),dd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Eh||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var a=(t=Ph(t,Vh))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&xr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=ac.MOCK_USER;else{s=(0,o.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ir(Er.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ac(c)}t._credentials=new Ah(new Th(s,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.sH)(e,void 0,void 0,(function(){var e,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return[4,dh(t)];case 1:return e=r.sent(),[4,vh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=kr(t);return e.Or.delete(0),Rc(e)}(n))]}}))}))}))}(Qh(Ph(this._delegate,Gh)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.sH)(e,void 0,void 0,(function(){var e,n;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return[4,dh(t)];case 1:return e=r.sent(),[4,vh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,i.sH)(this,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return(e=kr(t)).Or.add(0),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Qh(Ph(this._delegate,Gh)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&kh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(e,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(r){switch(r.label){case 0:return e=Ol,[4,mh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Qh(Ph(this._delegate,Gh)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new oh(e);return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e=function(t,e){kr(t).Gr.add(e),e.next()},[4,gh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var e;return(0,i.YH)(this,(function(n){switch(n.label){case 0:return e=function(t,e){kr(t).Gr.delete(e)},[4,gh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Qh(t=Ph(t,Gh)),Yh(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ir(Er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xd(this,Bh(this._delegate,t))}catch(t){throw bd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new yd(this,jh(this._delegate,t))}catch(t){throw bd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Sd(this,function(t,e){if(t=Ph(t,Vh),Nh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ir(Er.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Uh(t,null,function(t){return new Bi(jr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw bd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var n;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return[4,function(t){return fh(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new sh(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Qh(t),(function(n){return e(new ud(t,n))}))}(this._delegate,(function(n){return t(new vd(e,n))}))},t.prototype.batch=function(){var t=this;return Qh(this._delegate),new md(new td(this._delegate,(function(e){return ad(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ir(Er.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ir(Er.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),pd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.C6)(e,t),e.prototype.convertBytes=function(t){return new hd(new tf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return yd.eu(e,this.firestore,null)},e}(Xf),vd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new pd(t)}return t.prototype.get=function(t){var e=this,n=Cd(t);return this._delegate.get(n).then((function(t){return new Id(e._firestore,new Lf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Cd(t);return n?(Dh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Cd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,i.fX)([s,e,n],o)),this},t.prototype.delete=function(t){var e=Cd(t);return this._delegate.delete(e),this},t}(),md=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Cd(t);return n?(Dh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Cd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,i.fX)([s,e,n],o)),this},t.prototype.delete=function(t){var e=Cd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),gd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Pf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Td(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new pd(e),n),i.set(n,o)),o},t}();gd.su=new WeakMap;var yd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new pd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ir(Er.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Hh(n._delegate,r,new ii(e)))},t.eu=function(e,n,r){return new t(n,new Hh(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xd(this.firestore,Bh(this._delegate,t))}catch(t){throw bd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,o.Ku)(t))instanceof Hh&&zh(this._delegate,t)},t.prototype.set=function(t,e){e=Dh("DocumentReference.set",e);try{return e?rd(this._delegate,t,e):rd(this._delegate,t)}catch(t){throw bd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?id(this._delegate,t):id.apply(void 0,(0,i.fX)([this._delegate,t,e],n))}catch(t){throw bd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ad(Ph((t=this._delegate).firestore,Gh),[new Vo(t._key,To.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wd(e),i=Ed(e,(function(e){return new Id(t.firestore,new Lf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return od(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ph(t,Hh);var e=Ph(t.firestore,Gh),n=Qh(e),r=new nd(e);return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var n;return(0,i.YH)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=kr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=i.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new Ir(Er.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),o=il(r,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,ph(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Lf(e,r,t._key,n,new Of(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ph(t,Hh);var e=Ph(t.firestore,Gh);return yh(Qh(e),t._key,{source:"server"}).then((function(n){return sd(e,t,n)}))}(this._delegate):function(t){t=Ph(t,Hh);var e=Ph(t.firestore,Gh);return yh(Qh(e),t._key).then((function(n){return sd(e,t,n)}))}(this._delegate)).then((function(t){return new Id(e.firestore,new Lf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(gd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function bd(t,e,n){return t.message=t.message.replace(e,n),t}function wd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yh(r))return r}return{}}function Ed(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Yh(t[0])?t[0]:Yh(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Id=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new yd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Vf(this._delegate,t._delegate)},t}(),Td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.C6)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Id),Sd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new pd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,qf(this._delegate,function(t,e,n){var r=e,i=Rf("where",t);return new Bf(i,r,n)}(e,n,r)))}catch(e){throw bd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,qf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Rf("orderBy",t);return new jf(r,n)}(e,n)))}catch(e){throw bd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,qf(this._delegate,function(t){return Mh("limit",t),new zf("limit",t,"F")}(e)))}catch(e){throw bd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,qf(this._delegate,function(t){return Mh("limitToLast",t),new zf("limitToLast",t,"L")}(e)))}catch(e){throw bd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,qf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw bd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,qf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw bd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,qf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw bd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,qf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw bd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Kh(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ph(t,Uh);var e=Ph(t.firestore,Gh),n=Qh(e),r=new nd(e);return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.sH)(n,void 0,void 0,(function(){var n;return(0,i.YH)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.sH)(this,void 0,void 0,(function(){var r,o,a,s,u;return(0,i.YH)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,zu(t,e,!0)];case 1:return u=i.sent(),r=new wl(e,u.Bn),o=r._o(u.documents),a=r.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=i.sent(),u=il(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ph(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ph(t,Uh);var e=Ph(t.firestore,Gh),n=Qh(e),r=new nd(e);return bh(n,t._query,{source:"server"}).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate):function(t){t=Ph(t,Uh);var e=Ph(t.firestore,Gh),n=Qh(e),r=new nd(e);return Hf(t._query),bh(n,t._query).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate)).then((function(t){return new _d(e.firestore,new Mf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=wd(e),i=Ed(e,(function(e){return new _d(t.firestore,new Mf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return od(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(gd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ad=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Td(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),_d=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Sd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Td(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Ad(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Td(n._firestore,r))}))},t.prototype.isEqual=function(t){return Vf(this._delegate,t._delegate)},t}(),xd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,i.C6)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new yd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new yd(this.firestore,void 0===t?jh(this._delegate):jh(this._delegate,t))}catch(t){throw bd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ph(t.firestore,Gh),r=jh(t),i=Jf(t.converter,e);return ad(n,[hf(lf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,To.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new yd(e.firestore,t)}))},e.prototype.isEqual=function(t){return zh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(gd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Sd);function Cd(t){return Ph(t,Hh)}var Nd,Dd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Zh.bind.apply(Zh,(0,i.fX)([void 0],t)))}return t.documentId=function(){return new t(Kr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,o.Ku)(t))instanceof Zh&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),kd=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new pf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new ff("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new gf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Rd=n(1134),Od={Firestore:dd,GeoPoint:nf,Timestamp:Fr,Blob:hd,Transaction:vd,WriteBatch:md,DocumentReference:yd,DocumentSnapshot:Id,Query:Sd,QueryDocumentSnapshot:Td,QuerySnapshot:_d,CollectionReference:xd,FieldPath:Dd,FieldValue:kd,setLogLevel:function(t){var e;e=t,Tr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Rd.uA("firestore",(function(t){return function(t,e){return new dd(t,new Gh(t,e),new fd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Od)))})(Nd=r.A),Nd.registerVersion("@firebase/firestore","2.4.1")},2799:(t,e)=>{if("function"==typeof Symbol&&Symbol.for){var n=Symbol.for;n("react.element"),n("react.portal"),n("react.fragment"),n("react.strict_mode"),n("react.profiler"),n("react.provider"),n("react.context"),n("react.forward_ref"),n("react.suspense"),n("react.suspense_list"),n("react.memo"),n("react.lazy"),n("react.block"),n("react.server.block"),n("react.fundamental"),n("react.debug_trace_mode"),n("react.legacy_hidden")}},4363:(t,e,n)=>{n(2799)},7353:(t,e,n)=>{n.d(e,{Ay:()=>v});var r=n(8587),i=n(5540),o=n(6540),a=n(961);var s=n(7241),u="unmounted",c="exited",l="entering",h="entered",f="exiting",d=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=c,r.appearStatus=l):i=h:i=e.unmountOnExit||e.mountOnEnter?u:c,r.state={status:i},r.nextCallback=null,r}(0,i.A)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===u?{status:c}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==l&&n!==h&&(e=l):n!==l&&n!==h||(e=f)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===l){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:u})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],o=i[0],s=i[1],u=this.getTimeouts(),c=r?u.appear:u.enter;t||n?(this.props.onEnter(o,s),this.safeSetState({status:l},(function(){e.props.onEntering(o,s),e.onTransitionEnd(c,(function(){e.safeSetState({status:h},(function(){e.props.onEntered(o,s)}))}))}))):this.safeSetState({status:h},(function(){e.props.onEntered(o)}))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);e?(this.props.onExit(r),this.safeSetState({status:f},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===u)return null;var e=this.props,n=e.children,i=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,r.A)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(s.A.Provider,{value:null},"function"==typeof n?n(t,i):o.cloneElement(o.Children.only(n),i))},e}(o.Component);function p(){}d.contextType=s.A,d.propTypes={},d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},d.UNMOUNTED=u,d.EXITED=c,d.ENTERING=l,d.ENTERED=h,d.EXITING=f;const v=d},7241:(t,e,n)=>{n.d(e,{A:()=>r});const r=n(6540).createContext(null)},1635:(t,e,n)=>{n.d(e,{C6:()=>i,Cl:()=>o,Ju:()=>u,YH:()=>s,fX:()=>l,sH:()=>a,zs:()=>c});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}}]);